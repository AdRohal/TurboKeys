{"ast":null,"code":"var _jsxFileName = \"C:\\\\GitHub\\\\TurboKeys\\\\frontend\\\\src\\\\pages\\\\Home.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { TestMode, Language } from '../types';\nimport { typingAPI } from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [selectedMode, setSelectedMode] = useState(TestMode.THIRTY_SECONDS);\n  const [selectedLanguage, setSelectedLanguage] = useState(Language.ENGLISH);\n  const [isTestActive, setIsTestActive] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(30);\n  const [userInput, setUserInput] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [wpm, setWpm] = useState(0);\n  const [accuracy, setAccuracy] = useState(100);\n  const [isTestComplete, setIsTestComplete] = useState(false);\n  const [correctChars, setCorrectChars] = useState(0);\n  const [totalChars, setTotalChars] = useState(0);\n  const [startTime, setStartTime] = useState(null);\n  const [isSubmittingResult, setIsSubmittingResult] = useState(false);\n  const [wpmHistory, setWpmHistory] = useState([]);\n  const [errorHistory, setErrorHistory] = useState([]);\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const textAreaRef = useRef(null);\n  const timerRef = useRef(null);\n\n  // Listen for window resize and keyboard events\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n    const handleKeyDown = e => {\n      // Start test when user presses any key (except special keys)\n      if (!isTestActive && !isTestComplete && !e.ctrlKey && !e.altKey && !e.metaKey && e.key !== 'Tab' && e.key !== 'Escape' && e.key !== 'F1' && e.key !== 'F2' && e.key !== 'F3' && e.key !== 'F4' && e.key !== 'F5' && e.key !== 'F6' && e.key !== 'F7' && e.key !== 'F8' && e.key !== 'F9' && e.key !== 'F10' && e.key !== 'F11' && e.key !== 'F12') {\n        var _textAreaRef$current;\n        // Focus on the textarea to start typing\n        (_textAreaRef$current = textAreaRef.current) === null || _textAreaRef$current === void 0 ? void 0 : _textAreaRef$current.focus();\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [isTestActive, isTestComplete]);\n\n  // Sample texts for different languages - Multiple paragraphs for variety\n  const sampleTexts = useCallback(() => ({\n    english: [\"The art of communication has evolved dramatically throughout human history, transforming from simple gestures and sounds into sophisticated systems of written and spoken language. In today's digital age, the ability to type quickly and accurately has become an essential skill for personal and professional success. Whether you're writing emails, creating documents, programming software, or engaging in online conversations, your typing speed and accuracy directly impact your productivity and effectiveness. The development of muscle memory through consistent practice allows your fingers to move automatically across the keyboard, reducing the cognitive load required for typing and freeing your mind to focus on the content and ideas you want to express. Modern typing techniques emphasize proper posture, correct finger placement, and smooth, rhythmic keystrokes that minimize fatigue and maximize efficiency.\", \"Technology has revolutionized the way we work, learn, and connect with others across the globe. From artificial intelligence and machine learning to virtual reality and blockchain, innovative solutions are reshaping industries and creating new opportunities for growth and collaboration. The rapid pace of technological advancement requires continuous learning and adaptation, as professionals must stay current with emerging trends and tools. Digital literacy has become as fundamental as traditional reading and writing skills, enabling individuals to navigate complex information systems and participate fully in the modern economy. Social media platforms, cloud computing services, and mobile applications have transformed how we share information, conduct business, and maintain relationships.\", \"The natural world offers countless lessons about resilience, adaptation, and interconnectedness that can inspire and guide human behavior. Ecosystems demonstrate remarkable balance and efficiency, with each species playing a crucial role in maintaining environmental stability. Climate change and environmental degradation pose significant challenges that require collective action and innovative solutions from governments, businesses, and individuals. Sustainable practices, renewable energy sources, and conservation efforts are essential for preserving biodiversity and ensuring a healthy planet for future generations. Scientific research continues to reveal the intricate relationships between organisms and their environments, highlighting the importance of protecting natural habitats and reducing human impact on delicate ecological systems.\", \"Education serves as the foundation for personal growth, critical thinking, and societal progress, empowering individuals to reach their full potential and contribute meaningfully to their communities. The traditional classroom model is evolving to incorporate online learning, interactive technologies, and personalized instruction that accommodates diverse learning styles and schedules. Lifelong learning has become increasingly important as career paths become more dynamic and skills requirements change rapidly in response to technological and economic shifts. Educators are exploring innovative teaching methods, collaborative projects, and real-world applications to engage students and prepare them for success in an interconnected global society.\", \"The power of creativity and imagination drives innovation, artistic expression, and problem-solving across all aspects of human endeavor. Whether through literature, music, visual arts, or scientific discovery, creative thinking challenges conventional wisdom and opens new possibilities for understanding and improving the world around us. Collaborative creativity, where diverse perspectives and expertise combine to generate novel solutions, has proven particularly effective in addressing complex challenges that require multidisciplinary approaches. The creative process involves risk-taking, experimentation, and the willingness to learn from failure, qualities that are essential for personal and professional development in an uncertain and rapidly changing environment.\"],\n    french: [\"L'évolution de la technologie moderne a transformé notre façon de communiquer, de travailler et d'interagir avec le monde qui nous entoure. Dans cette ère numérique, la maîtrise du clavier est devenue une compétence fondamentale qui influence directement notre productivité et notre efficacité professionnelle. La France, avec sa riche tradition littéraire et culturelle, a toujours valorisé l'expression écrite comme un art noble et raffiné. Aujourd'hui, cette tradition se prolonge dans le domaine numérique, où la capacité à taper rapidement et précisément en français constitue un atout considérable pour les étudiants, les professionnels et les créateurs de contenu. Les particularités de la langue française, avec ses accents, ses cédilles et ses caractères spéciaux, exigent une attention particulière lors de l'apprentissage de la dactylographie.\", \"La culture française rayonne dans le monde entier à travers sa gastronomie, son art, sa littérature et son cinéma, créant des liens durables entre les peuples et enrichissant le patrimoine mondial de l'humanité. Les chefs français ont révolutionné l'art culinaire en développant des techniques sophistiquées et en valorisant la qualité des ingrédients locaux et saisonniers. Les musées français, notamment le Louvre, Orsay et le Centre Pompidou, abritent des collections exceptionnelles qui attirent des millions de visiteurs chaque année et contribuent au rayonnement culturel du pays. La langue française, parlée sur cinq continents, demeure un vecteur privilégié d'échanges diplomatiques, scientifiques et artistiques entre les nations francophones.\", \"L'innovation technologique française se distingue par son approche humaniste et son engagement envers le développement durable, plaçant l'éthique et la responsabilité sociale au cœur des avancées scientifiques. Les startups françaises excellent dans des domaines variés comme l'intelligence artificielle, la biotechnologie, l'énergie renouvelable et la mobilité urbaine. Le système éducatif français forme des ingénieurs et des chercheurs reconnus internationalement pour leur rigueur méthodologique et leur capacité d'innovation. Les pôles de compétitivité régionaux favorisent la collaboration entre universités, centres de recherche et entreprises, créant un écosystème propice à l'émergence de solutions innovantes pour relever les défis contemporains.\", \"L'histoire de France témoigne d'une longue tradition de résistance, de révolution et de progrès social qui continue d'inspirer les mouvements démocratiques dans le monde entier. Les idéaux de liberté, d'égalité et de fraternité proclamés lors de la Révolution française restent des références universelles pour les sociétés en quête de justice et de dignité humaine. Le système de protection sociale français, avec ses prestations familiales, son assurance maladie universelle et ses retraites solidaires, constitue un modèle envié qui concilie efficacité économique et cohésion sociale. La laïcité à la française offre un cadre unique pour garantir la liberté de conscience tout en préservant l'unité républicaine dans le respect de la diversité des convictions.\", \"L'art de vivre français privilégie l'équilibre entre travail et loisirs, accordant une importance particulière aux plaisirs simples de l'existence comme les repas partagés, les promenades dans la nature et les conversations enrichissantes. Cette philosophie de vie valorise la qualité plutôt que la quantité, encourageant une approche réfléchie de la consommation et des relations humaines. Les marchés français, avec leurs produits locaux et leurs producteurs passionnés, incarnent cette quête d'authenticité et de proximité qui caractérise l'identité française. La préservation du patrimoine architectural et naturel reflète l'attachement profond des Français à leur histoire et à leur environnement, transmettant aux générations futures un héritage d'une richesse exceptionnelle.\"]\n  }), []);\n\n  // Get random text for the selected language\n  const getRandomText = useCallback(language => {\n    const texts = sampleTexts()[language];\n    const randomIndex = Math.floor(Math.random() * texts.length);\n    return texts[randomIndex];\n  }, [sampleTexts]);\n\n  // Get test duration\n  const getTestDuration = useCallback(mode => {\n    switch (mode) {\n      case TestMode.FIFTEEN_SECONDS:\n        return 15;\n      case TestMode.THIRTY_SECONDS:\n        return 30;\n      case TestMode.SIXTY_SECONDS:\n        return 60;\n      case TestMode.ONE_TWENTY_SECONDS:\n        return 120;\n      default:\n        return 30;\n    }\n  }, []);\n\n  // State for current display text\n  const [displayText, setDisplayText] = useState('');\n\n  // Initialize with random text on component mount (page load)\n  useEffect(() => {\n    setDisplayText(getRandomText(selectedLanguage));\n  }, [getRandomText, selectedLanguage]);\n\n  // Generate new random text when language changes\n  useEffect(() => {\n    setDisplayText(getRandomText(selectedLanguage));\n    // Reset test when language changes\n    setIsTestActive(false);\n    setIsTestComplete(false);\n    setUserInput('');\n    setCurrentIndex(0);\n    setWpm(0);\n    setAccuracy(100);\n    setCorrectChars(0);\n    setTotalChars(0);\n    setStartTime(null);\n    setTimeLeft(getTestDuration(selectedMode));\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  }, [selectedLanguage, getRandomText, selectedMode, getTestDuration]);\n\n  // Start test\n  const startTest = () => {\n    if (!isTestActive && !isTestComplete) {\n      setIsTestActive(true);\n      setStartTime(new Date());\n      setTimeLeft(getTestDuration(selectedMode));\n\n      // Start timer\n      timerRef.current = setInterval(() => {\n        setTimeLeft(prev => {\n          if (prev <= 1) {\n            completeTest();\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    }\n  };\n\n  // Reset test\n  const resetTest = () => {\n    setIsTestActive(false);\n    setIsTestComplete(false);\n    setUserInput('');\n    setCurrentIndex(0);\n    setWpm(0);\n    setAccuracy(100);\n    setCorrectChars(0);\n    setTotalChars(0);\n    setStartTime(null);\n    setWpmHistory([]);\n    setErrorHistory([]);\n    setTimeLeft(getTestDuration(selectedMode));\n\n    // Select a new random text\n    setDisplayText(getRandomText(selectedLanguage));\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  // Handle input\n  const handleInput = e => {\n    if (isTestComplete) return;\n    const value = e.currentTarget.value;\n\n    // Start test on first input\n    if (!isTestActive && value.length > 0) {\n      startTest();\n    }\n\n    // If user reached the end of text, complete the test\n    if (value.length >= displayText.length) {\n      completeTest();\n      return;\n    }\n    setUserInput(value);\n    setCurrentIndex(value.length);\n\n    // Calculate accuracy\n    let correct = 0;\n    for (let i = 0; i < value.length && i < displayText.length; i++) {\n      if (value[i] === displayText[i]) {\n        correct++;\n      }\n    }\n    setCorrectChars(correct);\n    setTotalChars(value.length);\n    if (value.length > 0) {\n      setAccuracy(Math.round(correct / value.length * 100));\n    }\n  };\n\n  // Calculate WPM\n  useEffect(() => {\n    if (isTestActive && startTime) {\n      const timeElapsed = (Date.now() - startTime.getTime()) / 1000;\n      if (timeElapsed > 0) {\n        const wordsTyped = userInput.length / 5; // Standard: 5 characters = 1 word\n        const currentWpm = Math.round(wordsTyped / timeElapsed * 60);\n        setWpm(currentWpm);\n      }\n    }\n  }, [userInput, isTestActive, startTime]);\n\n  // Record WPM data point for graph\n  const recordWpmDataPoint = useCallback(() => {\n    if (!startTime || !isTestActive) return;\n    const currentTime = new Date();\n    const timeElapsed = (currentTime.getTime() - startTime.getTime()) / 1000;\n    const totalDuration = getTestDuration(selectedMode);\n    const secondsElapsed = totalDuration - timeLeft;\n    if (secondsElapsed > 0) {\n      const currentWpm = totalChars > 0 ? Math.round(correctChars / 5 / (secondsElapsed / 60)) : 0;\n      const rawWpm = totalChars > 0 ? Math.round(totalChars / 5 / (secondsElapsed / 60)) : 0;\n      const currentAccuracy = totalChars > 0 ? Math.round(correctChars / totalChars * 100) : 100;\n      setWpmHistory(prev => [...prev, {\n        time: secondsElapsed,\n        wpm: currentWpm,\n        raw: rawWpm,\n        accuracy: currentAccuracy\n      }]);\n    }\n  }, [startTime, isTestActive, timeLeft, totalChars, correctChars, selectedMode, getTestDuration]);\n\n  // Reset when mode or language changes\n  useEffect(() => {\n    const resetTestFunction = () => {\n      setIsTestActive(false);\n      setIsTestComplete(false);\n      setUserInput('');\n      setCurrentIndex(0);\n      setWpm(0);\n      setAccuracy(100);\n      setCorrectChars(0);\n      setTotalChars(0);\n      setStartTime(null);\n      setTimeLeft(getTestDuration(selectedMode));\n\n      // Select a new random text when language or mode changes\n      setDisplayText(getRandomText(selectedLanguage));\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n    resetTestFunction();\n  }, [selectedMode, selectedLanguage, getRandomText, getTestDuration]);\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, []);\n\n  // Generate character display - Word-based line breaking with proper spacing\n  const getCharacterDisplay = () => {\n    const maxLineLength = windowWidth < 576 ? 40 : windowWidth < 768 ? 55 : windowWidth < 1024 ? 70 : windowWidth < 1440 ? 85 : 100;\n\n    // Split text into words and reconstruct with proper spacing\n    const words = displayText.split(' ');\n    const lines = [];\n    let currentLine = [];\n    let currentLineLength = 0;\n    for (let i = 0; i < words.length; i++) {\n      const word = words[i];\n      const wordLength = word.length;\n\n      // Check if adding this word would exceed line length\n      if (currentLineLength + wordLength + (currentLine.length > 0 ? 1 : 0) > maxLineLength && currentLine.length > 0) {\n        // Start a new line\n        lines.push(currentLine.join(' '));\n        currentLine = [word];\n        currentLineLength = wordLength;\n      } else {\n        // Add word to current line\n        currentLine.push(word);\n        currentLineLength += wordLength + (currentLine.length > 1 ? 1 : 0);\n      }\n    }\n\n    // Add the last line\n    if (currentLine.length > 0) {\n      lines.push(currentLine.join(' '));\n    }\n\n    // Find current line based on character position\n    let currentLineIndex = 0;\n    let charsSoFar = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineLength = lines[i].length + (i < lines.length - 1 ? 1 : 0); // +1 for line break space\n      if (currentIndex >= charsSoFar && currentIndex < charsSoFar + lineLength) {\n        currentLineIndex = i;\n        break;\n      }\n      charsSoFar += lineLength;\n    }\n\n    // Show 3 lines starting from current line\n    const visibleLines = [];\n    for (let i = 0; i < 3; i++) {\n      const lineIndex = currentLineIndex + i;\n      if (lineIndex < lines.length) {\n        visibleLines.push(lines[lineIndex]);\n      } else {\n        visibleLines.push(''); // Empty line\n      }\n    }\n    return visibleLines.map((line, lineIndex) => {\n      if (line === '') {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-[2rem] flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-transparent\",\n            children: \".\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)\n        }, `empty-${lineIndex}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this);\n      }\n\n      // Calculate the starting character index for this line\n      let startIndex = 0;\n      for (let i = 0; i < currentLineIndex + lineIndex; i++) {\n        if (i < lines.length) {\n          startIndex += lines[i].length + (i < lines.length - 1 ? 1 : 0);\n        }\n      }\n      const lineElements = line.split('').map((char, charIndex) => {\n        const globalIndex = startIndex + charIndex;\n        let className = 'text-gray-400 dark:text-primary-300'; // Default untyped\n\n        if (globalIndex < userInput.length) {\n          if (userInput[globalIndex] === displayText[globalIndex]) {\n            className = 'text-gray-900 dark:text-[#ffca8d]';\n          } else {\n            className = 'text-red-500 bg-red-100 dark:text-red-400 dark:bg-red-900/30';\n          }\n        } else if (globalIndex === currentIndex && isTestActive) {\n          className = 'bg-primary-600 text-white';\n        }\n\n        // Handle space characters specifically to make them visible\n        if (char === ' ') {\n          return /*#__PURE__*/_jsxDEV(\"span\", {\n            className: className,\n            children: ['\\u00A0', \" \"]\n          }, globalIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this);\n        }\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: className,\n          children: char\n        }, globalIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this);\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-[2rem] flex items-center justify-center whitespace-nowrap\",\n        children: lineElements\n      }, lineIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this);\n    });\n  };\n\n  // Submit test result to backend\n  const submitTestResult = async () => {\n    console.log('submitTestResult called');\n    console.log('User:', user);\n    console.log('StartTime:', startTime);\n    if (!user || !startTime) {\n      console.log('Cannot submit test result: user or startTime missing', {\n        user: !!user,\n        startTime: !!startTime\n      });\n      return;\n    }\n    const testDuration = getTestDuration(selectedMode);\n    const errorsCount = totalChars - correctChars;\n    const testData = {\n      wpm: Math.round(wpm),\n      accuracy: Math.round(accuracy * 100) / 100,\n      duration: testDuration,\n      mode: 'time',\n      // Set as 'time' mode consistently\n      language: selectedLanguage,\n      difficulty: 'medium',\n      charactersTyped: totalChars,\n      errorsCount: Math.max(0, errorsCount),\n      correctCharacters: correctChars,\n      totalCharacters: displayText.length,\n      testText: displayText.substring(0, Math.min(totalChars, displayText.length)),\n      text: displayText\n    };\n    console.log('Submitting test result:', testData);\n    try {\n      setIsSubmittingResult(true);\n      const result = await typingAPI.submitTest(testData);\n      console.log('Test result submitted successfully:', result);\n      alert('Test result saved successfully!'); // Temporary feedback\n    } catch (error) {\n      console.error('Failed to submit test result:', error);\n      alert('Failed to save test result: ' + error.message); // Temporary feedback\n    } finally {\n      setIsSubmittingResult(false);\n    }\n  };\n\n  // Complete test and submit results\n  const completeTest = async () => {\n    setIsTestActive(false);\n    setIsTestComplete(true);\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n\n    // Submit result if user is logged in\n    if (user) {\n      await submitTestResult();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white dark:bg-primary-900 text-gray-900 dark:text-primary-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-16\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold text-primary-700 dark:text-[#ffca8d] mb-4\",\n          children: \"TurboKeys\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mb-16\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-3 justify-center\",\n            children: Object.values(TestMode).map(mode => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setSelectedMode(mode);\n                resetTest();\n              },\n              className: `px-5 py-3 rounded-lg text-sm font-medium transition-colors ${selectedMode === mode ? 'bg-primary-600 text-white' : 'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'}`,\n              children: mode\n            }, mode, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-3 justify-center\",\n            children: Object.values(Language).map(language => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setSelectedLanguage(language);\n                resetTest();\n              },\n              className: `px-5 py-3 rounded-lg text-sm font-medium transition-colors ${selectedLanguage === language ? 'bg-primary-600 text-white' : 'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'}`,\n              children: language === 'french' ? 'Français' : 'English'\n            }, language, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-auto px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center space-x-12 mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\",\n              children: timeLeft\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",\n              children: \"Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\",\n              children: wpm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",\n              children: \"WPM\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\",\n              children: [accuracy, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",\n              children: \"Accuracy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative cursor-text w-full overflow-hidden mb-8\",\n          style: {\n            height: '140px'\n          },\n          onClick: () => {\n            var _textAreaRef$current2;\n            return (_textAreaRef$current2 = textAreaRef.current) === null || _textAreaRef$current2 === void 0 ? void 0 : _textAreaRef$current2.focus();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `text-xl md:text-2xl font-mono max-w-full mx-auto h-full flex flex-col justify-center gap-1 px-4 md:px-8 transition-all duration-300 ${!isTestActive && !isTestComplete ? 'blur-sm' : ''}`,\n            style: {\n              whiteSpace: 'pre-wrap'\n            },\n            children: getCharacterDisplay()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: textAreaRef,\n            value: userInput,\n            onChange: handleInput,\n            className: \"absolute inset-0 w-full h-full opacity-0 resize-none outline-none\",\n            disabled: isTestComplete,\n            placeholder: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this), !isTestActive && !isTestComplete && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-gray-500 dark:text-primary-400\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg mb-1\",\n                children: \"Click here to start typing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm opacity-75\",\n                children: [\"Selected: \", selectedMode, \" \\u2022 \", selectedLanguage === 'french' ? 'Français' : 'English']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), isTestComplete && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-8 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-primary-600 dark:text-[#ffca8d] mb-6\",\n            children: \"Test Complete!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-3 gap-8 mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\",\n                children: wpm\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",\n                children: \"WPM\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-bold text-green-600 dark:text-green-400\",\n                children: [accuracy, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",\n                children: \"Accuracy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\",\n                children: [correctChars, \"/\", totalChars]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",\n                children: \"Correct\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 15\n          }, this), user && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: isSubmittingResult ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center space-x-2 text-yellow-600 dark:text-yellow-400\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: \"Saving your result...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-green-600 dark:text-green-400 text-sm\",\n              children: \"\\u2713 Result saved to your history\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 17\n          }, this), !user && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4 text-gray-600 dark:text-gray-400 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/login\",\n              className: \"text-primary-600 dark:text-primary-400 hover:underline\",\n              children: \"Sign in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 19\n            }, this), \" to save your results and track your progress\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: resetTest,\n            className: \"bg-primary-600 text-white px-8 py-3 rounded font-medium hover:bg-primary-700 transition-colors\",\n            children: \"Try Again\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this), !isTestActive && !isTestComplete && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-gray-500 dark:text-primary-400 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: \"Click on the text above to start typing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto mt-20 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500 dark:text-primary-400 space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Click on the text area to start \\u2022 Type the words exactly as shown \\u2022 Use backspace to correct mistakes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Your WPM and accuracy will be calculated in real-time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 448,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"LWmY/0My4S8avNMqTOmbYI0BNE0=\", false, function () {\n  return [useAuth];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","TestMode","Language","typingAPI","useAuth","jsxDEV","_jsxDEV","Home","_s","user","selectedMode","setSelectedMode","THIRTY_SECONDS","selectedLanguage","setSelectedLanguage","ENGLISH","isTestActive","setIsTestActive","timeLeft","setTimeLeft","userInput","setUserInput","currentIndex","setCurrentIndex","wpm","setWpm","accuracy","setAccuracy","isTestComplete","setIsTestComplete","correctChars","setCorrectChars","totalChars","setTotalChars","startTime","setStartTime","isSubmittingResult","setIsSubmittingResult","wpmHistory","setWpmHistory","errorHistory","setErrorHistory","windowWidth","setWindowWidth","window","innerWidth","textAreaRef","timerRef","handleResize","handleKeyDown","e","ctrlKey","altKey","metaKey","key","_textAreaRef$current","current","focus","addEventListener","removeEventListener","sampleTexts","english","french","getRandomText","language","texts","randomIndex","Math","floor","random","length","getTestDuration","mode","FIFTEEN_SECONDS","SIXTY_SECONDS","ONE_TWENTY_SECONDS","displayText","setDisplayText","clearInterval","startTest","Date","setInterval","prev","completeTest","resetTest","handleInput","value","currentTarget","correct","i","round","timeElapsed","now","getTime","wordsTyped","currentWpm","recordWpmDataPoint","currentTime","totalDuration","secondsElapsed","rawWpm","currentAccuracy","time","raw","resetTestFunction","getCharacterDisplay","maxLineLength","words","split","lines","currentLine","currentLineLength","word","wordLength","push","join","currentLineIndex","charsSoFar","lineLength","visibleLines","lineIndex","map","line","className","children","fileName","_jsxFileName","lineNumber","columnNumber","startIndex","lineElements","char","charIndex","globalIndex","submitTestResult","console","log","testDuration","errorsCount","testData","duration","difficulty","charactersTyped","max","correctCharacters","totalCharacters","testText","substring","min","text","result","submitTest","alert","error","message","Object","values","onClick","style","height","_textAreaRef$current2","whiteSpace","ref","onChange","disabled","placeholder","href","_c","$RefreshReg$"],"sources":["C:/GitHub/TurboKeys/frontend/src/pages/Home.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { TestMode, Language, TypingTestResult } from '../types';\r\nimport { typingAPI } from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst Home: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [selectedMode, setSelectedMode] = useState<TestMode>(TestMode.THIRTY_SECONDS);\r\n  const [selectedLanguage, setSelectedLanguage] = useState<Language>(Language.ENGLISH);\r\n  const [isTestActive, setIsTestActive] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(30);\r\n  const [userInput, setUserInput] = useState('');\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [wpm, setWpm] = useState(0);\r\n  const [accuracy, setAccuracy] = useState(100);\r\n  const [isTestComplete, setIsTestComplete] = useState(false);\r\n  const [correctChars, setCorrectChars] = useState(0);\r\n  const [totalChars, setTotalChars] = useState(0);\r\n  const [startTime, setStartTime] = useState<Date | null>(null);\r\n  const [isSubmittingResult, setIsSubmittingResult] = useState(false);\r\n  const [wpmHistory, setWpmHistory] = useState<{ time: number; wpm: number; raw: number; accuracy: number }[]>([]);\r\n  const [errorHistory, setErrorHistory] = useState<{ time: number; errors: number }[]>([]);\r\n  \r\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n  \r\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\r\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Listen for window resize and keyboard events\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowWidth(window.innerWidth);\r\n    };\r\n    \r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Start test when user presses any key (except special keys)\r\n      if (!isTestActive && !isTestComplete && \r\n          !e.ctrlKey && !e.altKey && !e.metaKey && \r\n          e.key !== 'Tab' && e.key !== 'Escape' && e.key !== 'F1' && \r\n          e.key !== 'F2' && e.key !== 'F3' && e.key !== 'F4' && \r\n          e.key !== 'F5' && e.key !== 'F6' && e.key !== 'F7' && \r\n          e.key !== 'F8' && e.key !== 'F9' && e.key !== 'F10' && \r\n          e.key !== 'F11' && e.key !== 'F12') {\r\n        // Focus on the textarea to start typing\r\n        textAreaRef.current?.focus();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [isTestActive, isTestComplete]);\r\n\r\n  // Sample texts for different languages - Multiple paragraphs for variety\r\n  const sampleTexts = useCallback(() => ({\r\n    english: [\r\n      \"The art of communication has evolved dramatically throughout human history, transforming from simple gestures and sounds into sophisticated systems of written and spoken language. In today's digital age, the ability to type quickly and accurately has become an essential skill for personal and professional success. Whether you're writing emails, creating documents, programming software, or engaging in online conversations, your typing speed and accuracy directly impact your productivity and effectiveness. The development of muscle memory through consistent practice allows your fingers to move automatically across the keyboard, reducing the cognitive load required for typing and freeing your mind to focus on the content and ideas you want to express. Modern typing techniques emphasize proper posture, correct finger placement, and smooth, rhythmic keystrokes that minimize fatigue and maximize efficiency.\",\r\n      \"Technology has revolutionized the way we work, learn, and connect with others across the globe. From artificial intelligence and machine learning to virtual reality and blockchain, innovative solutions are reshaping industries and creating new opportunities for growth and collaboration. The rapid pace of technological advancement requires continuous learning and adaptation, as professionals must stay current with emerging trends and tools. Digital literacy has become as fundamental as traditional reading and writing skills, enabling individuals to navigate complex information systems and participate fully in the modern economy. Social media platforms, cloud computing services, and mobile applications have transformed how we share information, conduct business, and maintain relationships.\",\r\n      \"The natural world offers countless lessons about resilience, adaptation, and interconnectedness that can inspire and guide human behavior. Ecosystems demonstrate remarkable balance and efficiency, with each species playing a crucial role in maintaining environmental stability. Climate change and environmental degradation pose significant challenges that require collective action and innovative solutions from governments, businesses, and individuals. Sustainable practices, renewable energy sources, and conservation efforts are essential for preserving biodiversity and ensuring a healthy planet for future generations. Scientific research continues to reveal the intricate relationships between organisms and their environments, highlighting the importance of protecting natural habitats and reducing human impact on delicate ecological systems.\",\r\n      \"Education serves as the foundation for personal growth, critical thinking, and societal progress, empowering individuals to reach their full potential and contribute meaningfully to their communities. The traditional classroom model is evolving to incorporate online learning, interactive technologies, and personalized instruction that accommodates diverse learning styles and schedules. Lifelong learning has become increasingly important as career paths become more dynamic and skills requirements change rapidly in response to technological and economic shifts. Educators are exploring innovative teaching methods, collaborative projects, and real-world applications to engage students and prepare them for success in an interconnected global society.\",\r\n      \"The power of creativity and imagination drives innovation, artistic expression, and problem-solving across all aspects of human endeavor. Whether through literature, music, visual arts, or scientific discovery, creative thinking challenges conventional wisdom and opens new possibilities for understanding and improving the world around us. Collaborative creativity, where diverse perspectives and expertise combine to generate novel solutions, has proven particularly effective in addressing complex challenges that require multidisciplinary approaches. The creative process involves risk-taking, experimentation, and the willingness to learn from failure, qualities that are essential for personal and professional development in an uncertain and rapidly changing environment.\"\r\n    ],\r\n    french: [\r\n      \"L'évolution de la technologie moderne a transformé notre façon de communiquer, de travailler et d'interagir avec le monde qui nous entoure. Dans cette ère numérique, la maîtrise du clavier est devenue une compétence fondamentale qui influence directement notre productivité et notre efficacité professionnelle. La France, avec sa riche tradition littéraire et culturelle, a toujours valorisé l'expression écrite comme un art noble et raffiné. Aujourd'hui, cette tradition se prolonge dans le domaine numérique, où la capacité à taper rapidement et précisément en français constitue un atout considérable pour les étudiants, les professionnels et les créateurs de contenu. Les particularités de la langue française, avec ses accents, ses cédilles et ses caractères spéciaux, exigent une attention particulière lors de l'apprentissage de la dactylographie.\",\r\n      \"La culture française rayonne dans le monde entier à travers sa gastronomie, son art, sa littérature et son cinéma, créant des liens durables entre les peuples et enrichissant le patrimoine mondial de l'humanité. Les chefs français ont révolutionné l'art culinaire en développant des techniques sophistiquées et en valorisant la qualité des ingrédients locaux et saisonniers. Les musées français, notamment le Louvre, Orsay et le Centre Pompidou, abritent des collections exceptionnelles qui attirent des millions de visiteurs chaque année et contribuent au rayonnement culturel du pays. La langue française, parlée sur cinq continents, demeure un vecteur privilégié d'échanges diplomatiques, scientifiques et artistiques entre les nations francophones.\",\r\n      \"L'innovation technologique française se distingue par son approche humaniste et son engagement envers le développement durable, plaçant l'éthique et la responsabilité sociale au cœur des avancées scientifiques. Les startups françaises excellent dans des domaines variés comme l'intelligence artificielle, la biotechnologie, l'énergie renouvelable et la mobilité urbaine. Le système éducatif français forme des ingénieurs et des chercheurs reconnus internationalement pour leur rigueur méthodologique et leur capacité d'innovation. Les pôles de compétitivité régionaux favorisent la collaboration entre universités, centres de recherche et entreprises, créant un écosystème propice à l'émergence de solutions innovantes pour relever les défis contemporains.\",\r\n      \"L'histoire de France témoigne d'une longue tradition de résistance, de révolution et de progrès social qui continue d'inspirer les mouvements démocratiques dans le monde entier. Les idéaux de liberté, d'égalité et de fraternité proclamés lors de la Révolution française restent des références universelles pour les sociétés en quête de justice et de dignité humaine. Le système de protection sociale français, avec ses prestations familiales, son assurance maladie universelle et ses retraites solidaires, constitue un modèle envié qui concilie efficacité économique et cohésion sociale. La laïcité à la française offre un cadre unique pour garantir la liberté de conscience tout en préservant l'unité républicaine dans le respect de la diversité des convictions.\",\r\n      \"L'art de vivre français privilégie l'équilibre entre travail et loisirs, accordant une importance particulière aux plaisirs simples de l'existence comme les repas partagés, les promenades dans la nature et les conversations enrichissantes. Cette philosophie de vie valorise la qualité plutôt que la quantité, encourageant une approche réfléchie de la consommation et des relations humaines. Les marchés français, avec leurs produits locaux et leurs producteurs passionnés, incarnent cette quête d'authenticité et de proximité qui caractérise l'identité française. La préservation du patrimoine architectural et naturel reflète l'attachement profond des Français à leur histoire et à leur environnement, transmettant aux générations futures un héritage d'une richesse exceptionnelle.\"\r\n    ]\r\n  }), []);\r\n\r\n  // Get random text for the selected language\r\n  const getRandomText = useCallback((language: Language): string => {\r\n    const texts = sampleTexts()[language];\r\n    const randomIndex = Math.floor(Math.random() * texts.length);\r\n    return texts[randomIndex];\r\n  }, [sampleTexts]);\r\n\r\n  // Get test duration\r\n  const getTestDuration = useCallback((mode: TestMode): number => {\r\n    switch (mode) {\r\n      case TestMode.FIFTEEN_SECONDS: return 15;\r\n      case TestMode.THIRTY_SECONDS: return 30;\r\n      case TestMode.SIXTY_SECONDS: return 60;\r\n      case TestMode.ONE_TWENTY_SECONDS: return 120;\r\n      default: return 30;\r\n    }\r\n  }, []);\r\n\r\n  // State for current display text\r\n  const [displayText, setDisplayText] = useState('');\r\n\r\n  // Initialize with random text on component mount (page load)\r\n  useEffect(() => {\r\n    setDisplayText(getRandomText(selectedLanguage));\r\n  }, [getRandomText, selectedLanguage]);\r\n\r\n  // Generate new random text when language changes\r\n  useEffect(() => {\r\n    setDisplayText(getRandomText(selectedLanguage));\r\n    // Reset test when language changes\r\n    setIsTestActive(false);\r\n    setIsTestComplete(false);\r\n    setUserInput('');\r\n    setCurrentIndex(0);\r\n    setWpm(0);\r\n    setAccuracy(100);\r\n    setCorrectChars(0);\r\n    setTotalChars(0);\r\n    setStartTime(null);\r\n    setTimeLeft(getTestDuration(selectedMode));\r\n    \r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n  }, [selectedLanguage, getRandomText, selectedMode, getTestDuration]);\r\n\r\n  // Start test\r\n  const startTest = () => {\r\n    if (!isTestActive && !isTestComplete) {\r\n      setIsTestActive(true);\r\n      setStartTime(new Date());\r\n      setTimeLeft(getTestDuration(selectedMode));\r\n      \r\n      // Start timer\r\n      timerRef.current = setInterval(() => {\r\n        setTimeLeft(prev => {\r\n          if (prev <= 1) {\r\n            completeTest();\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  // Reset test\r\n  const resetTest = () => {\r\n    setIsTestActive(false);\r\n    setIsTestComplete(false);\r\n    setUserInput('');\r\n    setCurrentIndex(0);\r\n    setWpm(0);\r\n    setAccuracy(100);\r\n    setCorrectChars(0);\r\n    setTotalChars(0);\r\n    setStartTime(null);\r\n    setWpmHistory([]);\r\n    setErrorHistory([]);\r\n    setTimeLeft(getTestDuration(selectedMode));\r\n    \r\n    // Select a new random text\r\n    setDisplayText(getRandomText(selectedLanguage));\r\n    \r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n  };\r\n\r\n  // Handle input\r\n  const handleInput = (e: React.FormEvent<HTMLTextAreaElement>) => {\r\n    if (isTestComplete) return;\r\n    \r\n    const value = e.currentTarget.value;\r\n    \r\n    // Start test on first input\r\n    if (!isTestActive && value.length > 0) {\r\n      startTest();\r\n    }\r\n    \r\n    // If user reached the end of text, complete the test\r\n    if (value.length >= displayText.length) {\r\n      completeTest();\r\n      return;\r\n    }\r\n    \r\n    setUserInput(value);\r\n    setCurrentIndex(value.length);\r\n    \r\n    // Calculate accuracy\r\n    let correct = 0;\r\n    for (let i = 0; i < value.length && i < displayText.length; i++) {\r\n      if (value[i] === displayText[i]) {\r\n        correct++;\r\n      }\r\n    }\r\n    setCorrectChars(correct);\r\n    setTotalChars(value.length);\r\n    \r\n    if (value.length > 0) {\r\n      setAccuracy(Math.round((correct / value.length) * 100));\r\n    }\r\n  };\r\n\r\n  // Calculate WPM\r\n  useEffect(() => {\r\n    if (isTestActive && startTime) {\r\n      const timeElapsed = (Date.now() - startTime.getTime()) / 1000;\r\n      if (timeElapsed > 0) {\r\n        const wordsTyped = userInput.length / 5; // Standard: 5 characters = 1 word\r\n        const currentWpm = Math.round((wordsTyped / timeElapsed) * 60);\r\n        setWpm(currentWpm);\r\n      }\r\n    }\r\n  }, [userInput, isTestActive, startTime]);\r\n\r\n  // Record WPM data point for graph\r\n  const recordWpmDataPoint = useCallback(() => {\r\n    if (!startTime || !isTestActive) return;\r\n    \r\n    const currentTime = new Date();\r\n    const timeElapsed = (currentTime.getTime() - startTime.getTime()) / 1000;\r\n    const totalDuration = getTestDuration(selectedMode);\r\n    const secondsElapsed = totalDuration - timeLeft;\r\n    \r\n    if (secondsElapsed > 0) {\r\n      const currentWpm = totalChars > 0 ? Math.round((correctChars / 5) / (secondsElapsed / 60)) : 0;\r\n      const rawWpm = totalChars > 0 ? Math.round((totalChars / 5) / (secondsElapsed / 60)) : 0;\r\n      const currentAccuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;\r\n      \r\n      setWpmHistory(prev => [\r\n        ...prev,\r\n        {\r\n          time: secondsElapsed,\r\n          wpm: currentWpm,\r\n          raw: rawWpm,\r\n          accuracy: currentAccuracy\r\n        }\r\n      ]);\r\n    }\r\n  }, [startTime, isTestActive, timeLeft, totalChars, correctChars, selectedMode, getTestDuration]);\r\n\r\n  // Reset when mode or language changes\r\n  useEffect(() => {\r\n    const resetTestFunction = () => {\r\n      setIsTestActive(false);\r\n      setIsTestComplete(false);\r\n      setUserInput('');\r\n      setCurrentIndex(0);\r\n      setWpm(0);\r\n      setAccuracy(100);\r\n      setCorrectChars(0);\r\n      setTotalChars(0);\r\n      setStartTime(null);\r\n      setTimeLeft(getTestDuration(selectedMode));\r\n      \r\n      // Select a new random text when language or mode changes\r\n      setDisplayText(getRandomText(selectedLanguage));\r\n      \r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n        timerRef.current = null;\r\n      }\r\n    };\r\n    \r\n    resetTestFunction();\r\n  }, [selectedMode, selectedLanguage, getRandomText, getTestDuration]);\r\n\r\n  // Cleanup\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Generate character display - Word-based line breaking with proper spacing\r\n  const getCharacterDisplay = () => {\r\n    const maxLineLength = windowWidth < 576 ? 40 : windowWidth < 768 ? 55 : windowWidth < 1024 ? 70 : windowWidth < 1440 ? 85 : 100;\r\n    \r\n    // Split text into words and reconstruct with proper spacing\r\n    const words = displayText.split(' ');\r\n    const lines: string[] = [];\r\n    let currentLine: string[] = [];\r\n    let currentLineLength = 0;\r\n    \r\n    for (let i = 0; i < words.length; i++) {\r\n      const word = words[i];\r\n      const wordLength = word.length;\r\n      \r\n      // Check if adding this word would exceed line length\r\n      if (currentLineLength + wordLength + (currentLine.length > 0 ? 1 : 0) > maxLineLength && currentLine.length > 0) {\r\n        // Start a new line\r\n        lines.push(currentLine.join(' '));\r\n        currentLine = [word];\r\n        currentLineLength = wordLength;\r\n      } else {\r\n        // Add word to current line\r\n        currentLine.push(word);\r\n        currentLineLength += wordLength + (currentLine.length > 1 ? 1 : 0);\r\n      }\r\n    }\r\n    \r\n    // Add the last line\r\n    if (currentLine.length > 0) {\r\n      lines.push(currentLine.join(' '));\r\n    }\r\n    \r\n    // Find current line based on character position\r\n    let currentLineIndex = 0;\r\n    let charsSoFar = 0;\r\n    \r\n    for (let i = 0; i < lines.length; i++) {\r\n      const lineLength = lines[i].length + (i < lines.length - 1 ? 1 : 0); // +1 for line break space\r\n      if (currentIndex >= charsSoFar && currentIndex < charsSoFar + lineLength) {\r\n        currentLineIndex = i;\r\n        break;\r\n      }\r\n      charsSoFar += lineLength;\r\n    }\r\n    \r\n    // Show 3 lines starting from current line\r\n    const visibleLines = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      const lineIndex = currentLineIndex + i;\r\n      if (lineIndex < lines.length) {\r\n        visibleLines.push(lines[lineIndex]);\r\n      } else {\r\n        visibleLines.push(''); // Empty line\r\n      }\r\n    }\r\n    \r\n    return visibleLines.map((line, lineIndex) => {\r\n      if (line === '') {\r\n        return (\r\n          <div key={`empty-${lineIndex}`} className=\"h-[2rem] flex items-center justify-center\">\r\n            <span className=\"text-transparent\">.</span>\r\n          </div>\r\n        );\r\n      }\r\n      \r\n      // Calculate the starting character index for this line\r\n      let startIndex = 0;\r\n      for (let i = 0; i < currentLineIndex + lineIndex; i++) {\r\n        if (i < lines.length) {\r\n          startIndex += lines[i].length + (i < lines.length - 1 ? 1 : 0);\r\n        }\r\n      }\r\n      \r\n      const lineElements = line.split('').map((char, charIndex) => {\r\n        const globalIndex = startIndex + charIndex;\r\n        let className = 'text-gray-400 dark:text-primary-300'; // Default untyped\r\n        \r\n        if (globalIndex < userInput.length) {\r\n          if (userInput[globalIndex] === displayText[globalIndex]) {\r\n            className = 'text-gray-900 dark:text-[#ffca8d]';\r\n          } else {\r\n            className = 'text-red-500 bg-red-100 dark:text-red-400 dark:bg-red-900/30';\r\n          }\r\n        } else if (globalIndex === currentIndex && isTestActive) {\r\n          className = 'bg-primary-600 text-white';\r\n        }\r\n        \r\n        // Handle space characters specifically to make them visible\r\n        if (char === ' ') {\r\n          return (\r\n            <span key={globalIndex} className={className}>\r\n              {'\\u00A0'} {/* Non-breaking space to make it visible */}\r\n            </span>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <span key={globalIndex} className={className}>\r\n            {char}\r\n          </span>\r\n        );\r\n      });\r\n      \r\n      return (\r\n        <div key={lineIndex} className=\"h-[2rem] flex items-center justify-center whitespace-nowrap\">\r\n          {lineElements}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  // Submit test result to backend\r\n  const submitTestResult = async () => {\r\n    console.log('submitTestResult called');\r\n    console.log('User:', user);\r\n    console.log('StartTime:', startTime);\r\n    \r\n    if (!user || !startTime) {\r\n      console.log('Cannot submit test result: user or startTime missing', { user: !!user, startTime: !!startTime });\r\n      return;\r\n    }\r\n\r\n    const testDuration = getTestDuration(selectedMode);\r\n    const errorsCount = totalChars - correctChars;\r\n\r\n    const testData = {\r\n      wpm: Math.round(wpm),\r\n      accuracy: Math.round(accuracy * 100) / 100,\r\n      duration: testDuration,\r\n      mode: 'time', // Set as 'time' mode consistently\r\n      language: selectedLanguage,\r\n      difficulty: 'medium',\r\n      charactersTyped: totalChars,\r\n      errorsCount: Math.max(0, errorsCount),\r\n      correctCharacters: correctChars,\r\n      totalCharacters: displayText.length,\r\n      testText: displayText.substring(0, Math.min(totalChars, displayText.length)),\r\n      text: displayText\r\n    };\r\n\r\n    console.log('Submitting test result:', testData);\r\n\r\n    try {\r\n      setIsSubmittingResult(true);\r\n      const result = await typingAPI.submitTest(testData);\r\n      console.log('Test result submitted successfully:', result);\r\n      alert('Test result saved successfully!'); // Temporary feedback\r\n    } catch (error) {\r\n      console.error('Failed to submit test result:', error);\r\n      alert('Failed to save test result: ' + (error as any).message); // Temporary feedback\r\n    } finally {\r\n      setIsSubmittingResult(false);\r\n    }\r\n  };\r\n\r\n  // Complete test and submit results\r\n  const completeTest = async () => {\r\n    setIsTestActive(false);\r\n    setIsTestComplete(true);\r\n    \r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n\r\n    // Submit result if user is logged in\r\n    if (user) {\r\n      await submitTestResult();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white dark:bg-primary-900 text-gray-900 dark:text-primary-100\">\r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        {/* Header - Clean and minimal */}\r\n        <div className=\"text-center mb-16\">\r\n          <h1 className=\"text-4xl font-bold text-primary-700 dark:text-[#ffca8d] mb-4\">\r\n            TurboKeys\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Mode Selection - Clean and centered */}\r\n        <div className=\"flex justify-center mb-16\">\r\n          <div className=\"flex flex-col items-center gap-8\">\r\n            <div className=\"flex flex-wrap gap-3 justify-center\">\r\n              {Object.values(TestMode).map((mode) => (\r\n                <button\r\n                  key={mode}\r\n                  onClick={() => {\r\n                    setSelectedMode(mode);\r\n                    resetTest();\r\n                  }}\r\n                  className={`px-5 py-3 rounded-lg text-sm font-medium transition-colors ${\r\n                    selectedMode === mode\r\n                      ? 'bg-primary-600 text-white'\r\n                      : 'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'\r\n                  }`}\r\n                >\r\n                  {mode}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-3 justify-center\">\r\n              {Object.values(Language).map((language) => (\r\n                <button\r\n                  key={language}\r\n                  onClick={() => {\r\n                    setSelectedLanguage(language);\r\n                    resetTest();\r\n                  }}\r\n                  className={`px-5 py-3 rounded-lg text-sm font-medium transition-colors ${\r\n                    selectedLanguage === language\r\n                      ? 'bg-primary-600 text-white'\r\n                      : 'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'\r\n                  }`}\r\n                >\r\n                  {language === 'french' ? 'Français' : 'English'}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Typing Test - Clean centered layout like MonkeyType */}\r\n        <div className=\"mx-auto px-4\">\r\n          {/* Stats Display */}\r\n          <div className=\"flex justify-center space-x-12 mb-8\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\">{timeLeft}</div>\r\n              <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Time</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\">{wpm}</div>\r\n              <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">WPM</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\">{accuracy}%</div>\r\n              <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Accuracy</div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Typing Area */}\r\n          <div \r\n            className=\"relative cursor-text w-full overflow-hidden mb-8\"\r\n            style={{ height: '140px' }}\r\n            onClick={() => textAreaRef.current?.focus()}\r\n          >\r\n            <div className={`text-xl md:text-2xl font-mono max-w-full mx-auto h-full flex flex-col justify-center gap-1 px-4 md:px-8 transition-all duration-300 ${!isTestActive && !isTestComplete ? 'blur-sm' : ''}`} style={{ whiteSpace: 'pre-wrap' }}>\r\n              {getCharacterDisplay()}\r\n            </div>\r\n            \r\n            {/* Invisible textarea for input */}\r\n            <textarea\r\n              ref={textAreaRef}\r\n              value={userInput}\r\n              onChange={handleInput}\r\n              className=\"absolute inset-0 w-full h-full opacity-0 resize-none outline-none\"\r\n              disabled={isTestComplete}\r\n              placeholder=\"\"\r\n            />\r\n            \r\n            {/* Focus overlay */}\r\n            {!isTestActive && !isTestComplete && (\r\n              <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                <div className=\"text-center text-gray-500 dark:text-primary-400\">\r\n                  <p className=\"text-lg mb-1\">Click here to start typing</p>\r\n                  <p className=\"text-sm opacity-75\">Selected: {selectedMode} • {selectedLanguage === 'french' ? 'Français' : 'English'}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Test Complete Screen */}\r\n          {isTestComplete && (\r\n            <div className=\"text-center p-8 mb-6\">\r\n              <h2 className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d] mb-6\">Test Complete!</h2>\r\n              <div className=\"grid grid-cols-3 gap-8 mb-8\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\">{wpm}</div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">WPM</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-green-600 dark:text-green-400\">{accuracy}%</div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Accuracy</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\">{correctChars}/{totalChars}</div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Correct</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Submission Status */}\r\n              {user && (\r\n                <div className=\"mb-4\">\r\n                  {isSubmittingResult ? (\r\n                    <div className=\"flex items-center justify-center space-x-2 text-yellow-600 dark:text-yellow-400\">\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600\"></div>\r\n                      <span className=\"text-sm\">Saving your result...</span>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-green-600 dark:text-green-400 text-sm\">\r\n                      ✓ Result saved to your history\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n              \r\n              {!user && (\r\n                <div className=\"mb-4 text-gray-600 dark:text-gray-400 text-sm\">\r\n                  <a href=\"/login\" className=\"text-primary-600 dark:text-primary-400 hover:underline\">\r\n                    Sign in\r\n                  </a> to save your results and track your progress\r\n                </div>\r\n              )}\r\n              \r\n              <button \r\n                onClick={resetTest}\r\n                className=\"bg-primary-600 text-white px-8 py-3 rounded font-medium hover:bg-primary-700 transition-colors\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {!isTestActive && !isTestComplete && (\r\n            <div className=\"text-center text-gray-500 dark:text-primary-400 mb-4\">\r\n              <p className=\"text-sm\">Click on the text above to start typing</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Instructions - Clean and minimal */}\r\n        <div className=\"max-w-4xl mx-auto mt-20 text-center\">\r\n          <div className=\"text-sm text-gray-500 dark:text-primary-400 space-y-2\">\r\n            <p>Click on the text area to start • Type the words exactly as shown • Use backspace to correct mistakes</p>\r\n            <p>Your WPM and accuracy will be calculated in real-time</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}