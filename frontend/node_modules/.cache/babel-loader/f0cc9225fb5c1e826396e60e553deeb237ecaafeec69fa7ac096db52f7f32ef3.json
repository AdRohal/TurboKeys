{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import{TestMode,Language}from'../types';import{typingAPI}from'../services/api';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const{user}=useAuth();const[selectedMode,setSelectedMode]=useState(TestMode.THIRTY_SECONDS);const[selectedLanguage,setSelectedLanguage]=useState(Language.ENGLISH);const[isTestActive,setIsTestActive]=useState(false);const[timeLeft,setTimeLeft]=useState(30);// This should match the default mode\nconst[userInput,setUserInput]=useState('');const[currentIndex,setCurrentIndex]=useState(0);const[wpm,setWpm]=useState(0);const[accuracy,setAccuracy]=useState(100);const[isTestComplete,setIsTestComplete]=useState(false);const[correctChars,setCorrectChars]=useState(0);const[totalChars,setTotalChars]=useState(0);const[startTime,setStartTime]=useState(null);const[isSubmittingResult,setIsSubmittingResult]=useState(false);const[wpmHistory,setWpmHistory]=useState([]);const[errorHistory,setErrorHistory]=useState([]);const[lastErrorCount,setLastErrorCount]=useState(0);const[windowWidth,setWindowWidth]=useState(window.innerWidth);const textAreaRef=useRef(null);const timerRef=useRef(null);const isTimerRunningRef=useRef(false);const startTimeRef=useRef(null);const timerId=useRef(Math.random());// Unique ID for this component instance\n// Add refs to store current values for timer callbacks\nconst totalCharsRef=useRef(0);const correctCharsRef=useRef(0);const wpmRef=useRef(0);const accuracyRef=useRef(100);// Listen for window resize\nuseEffect(()=>{const handleResize=()=>{setWindowWidth(window.innerWidth);};window.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);};},[]);// Sample texts for different languages - Multiple paragraphs for variety\nconst sampleTexts=useCallback(()=>({english:[\"The art of communication has evolved dramatically throughout human history, transforming from simple gestures and sounds into sophisticated systems of written and spoken language. In today's digital age, the ability to type quickly and accurately has become an essential skill for personal and professional success. Whether you're writing emails, creating documents, programming software, or engaging in online conversations, your typing speed and accuracy directly impact your productivity and effectiveness. The development of muscle memory through consistent practice allows your fingers to move automatically across the keyboard, reducing the cognitive load required for typing and freeing your mind to focus on the content and ideas you want to express. Modern typing techniques emphasize proper posture, correct finger placement, and smooth, rhythmic keystrokes that minimize fatigue and maximize efficiency.\",\"Technology has revolutionized the way we work, learn, and connect with others across the globe. From artificial intelligence and machine learning to virtual reality and blockchain, innovative solutions are reshaping industries and creating new opportunities for growth and collaboration. The rapid pace of technological advancement requires continuous learning and adaptation, as professionals must stay current with emerging trends and tools. Digital literacy has become as fundamental as traditional reading and writing skills, enabling individuals to navigate complex information systems and participate fully in the modern economy. Social media platforms, cloud computing services, and mobile applications have transformed how we share information, conduct business, and maintain relationships.\",\"The natural world offers countless lessons about resilience, adaptation, and interconnectedness that can inspire and guide human behavior. Ecosystems demonstrate remarkable balance and efficiency, with each species playing a crucial role in maintaining environmental stability. Climate change and environmental degradation pose significant challenges that require collective action and innovative solutions from governments, businesses, and individuals. Sustainable practices, renewable energy sources, and conservation efforts are essential for preserving biodiversity and ensuring a healthy planet for future generations. Scientific research continues to reveal the intricate relationships between organisms and their environments, highlighting the importance of protecting natural habitats and reducing human impact on delicate ecological systems.\",\"Education serves as the foundation for personal growth, critical thinking, and societal progress, empowering individuals to reach their full potential and contribute meaningfully to their communities. The traditional classroom model is evolving to incorporate online learning, interactive technologies, and personalized instruction that accommodates diverse learning styles and schedules. Lifelong learning has become increasingly important as career paths become more dynamic and skills requirements change rapidly in response to technological and economic shifts. Educators are exploring innovative teaching methods, collaborative projects, and real-world applications to engage students and prepare them for success in an interconnected global society.\",\"The power of creativity and imagination drives innovation, artistic expression, and problem-solving across all aspects of human endeavor. Whether through literature, music, visual arts, or scientific discovery, creative thinking challenges conventional wisdom and opens new possibilities for understanding and improving the world around us. Collaborative creativity, where diverse perspectives and expertise combine to generate novel solutions, has proven particularly effective in addressing complex challenges that require multidisciplinary approaches. The creative process involves risk-taking, experimentation, and the willingness to learn from failure, qualities that are essential for personal and professional development in an uncertain and rapidly changing environment.\"],french:[\"L'évolution de la technologie moderne a transformé notre façon de communiquer, de travailler et d'interagir avec le monde qui nous entoure. Dans cette ère numérique, la maîtrise du clavier est devenue une compétence fondamentale qui influence directement notre productivité et notre efficacité professionnelle. La France, avec sa riche tradition littéraire et culturelle, a toujours valorisé l'expression écrite comme un art noble et raffiné. Aujourd'hui, cette tradition se prolonge dans le domaine numérique, où la capacité à taper rapidement et précisément en français constitue un atout considérable pour les étudiants, les professionnels et les créateurs de contenu. Les particularités de la langue française, avec ses accents, ses cédilles et ses caractères spéciaux, exigent une attention particulière lors de l'apprentissage de la dactylographie.\",\"La culture française rayonne dans le monde entier à travers sa gastronomie, son art, sa littérature et son cinéma, créant des liens durables entre les peuples et enrichissant le patrimoine mondial de l'humanité. Les chefs français ont révolutionné l'art culinaire en développant des techniques sophistiquées et en valorisant la qualité des ingrédients locaux et saisonniers. Les musées français, notamment le Louvre, Orsay et le Centre Pompidou, abritent des collections exceptionnelles qui attirent des millions de visiteurs chaque année et contribuent au rayonnement culturel du pays. La langue française, parlée sur cinq continents, demeure un vecteur privilégié d'échanges diplomatiques, scientifiques et artistiques entre les nations francophones.\",\"L'innovation technologique française se distingue par son approche humaniste et son engagement envers le développement durable, plaçant l'éthique et la responsabilité sociale au cœur des avancées scientifiques. Les startups françaises excellent dans des domaines variés comme l'intelligence artificielle, la biotechnologie, l'énergie renouvelable et la mobilité urbaine. Le système éducatif français forme des ingénieurs et des chercheurs reconnus internationalement pour leur rigueur méthodologique et leur capacité d'innovation. Les pôles de compétitivité régionaux favorisent la collaboration entre universités, centres de recherche et entreprises, créant un écosystème propice à l'émergence de solutions innovantes pour relever les défis contemporains.\",\"L'histoire de France témoigne d'une longue tradition de résistance, de révolution et de progrès social qui continue d'inspirer les mouvements démocratiques dans le monde entier. Les idéaux de liberté, d'égalité et de fraternité proclamés lors de la Révolution française restent des références universelles pour les sociétés en quête de justice et de dignité humaine. Le système de protection sociale français, avec ses prestations familiales, son assurance maladie universelle et ses retraites solidaires, constitue un modèle envié qui concilie efficacité économique et cohésion sociale. La laïcité à la française offre un cadre unique pour garantir la liberté de conscience tout en préservant l'unité républicaine dans le respect de la diversité des convictions.\",\"L'art de vivre français privilégie l'équilibre entre travail et loisirs, accordant une importance particulière aux plaisirs simples de l'existence comme les repas partagés, les promenades dans la nature et les conversations enrichissantes. Cette philosophie de vie valorise la qualité plutôt que la quantité, encourageant une approche réfléchie de la consommation et des relations humaines. Les marchés français, avec leurs produits locaux et leurs producteurs passionnés, incarnent cette quête d'authenticité et de proximité qui caractérise l'identité française. La préservation du patrimoine architectural et naturel reflète l'attachement profond des Français à leur histoire et à leur environnement, transmettant aux générations futures un héritage d'une richesse exceptionnelle.\"]}),[]);// Get random text for the selected language\nconst getRandomText=useCallback(language=>{const texts=sampleTexts()[language];const randomIndex=Math.floor(Math.random()*texts.length);return texts[randomIndex];},[sampleTexts]);// Get test duration\nconst getTestDuration=useCallback(mode=>{switch(mode){case TestMode.FIFTEEN_SECONDS:return 15;case TestMode.THIRTY_SECONDS:return 30;case TestMode.SIXTY_SECONDS:return 60;case TestMode.ONE_TWENTY_SECONDS:return 120;default:return 30;}},[]);// State for current display text\nconst[displayText,setDisplayText]=useState('');// Initialize with random text on component mount (page load) and when language/mode changes\nuseEffect(()=>{const instanceId=timerId.current;console.log('Component mount or language/mode changed, resetting test for instance:',instanceId);const newTimeLeft=getTestDuration(selectedMode);console.log('Setting timeLeft to:',newTimeLeft,'for mode:',selectedMode,'instance:',instanceId);// Aggressively stop any running timer\nisTimerRunningRef.current=false;if(timerRef.current){console.log('useEffect clearing timer:',timerRef.current,'instance:',instanceId);clearInterval(timerRef.current);timerRef.current=null;}setDisplayText(getRandomText(selectedLanguage));setIsTestActive(false);setIsTestComplete(false);setUserInput('');setCurrentIndex(0);setWpm(0);setAccuracy(100);setCorrectChars(0);setTotalChars(0);setStartTime(null);startTimeRef.current=null;setWpmHistory([]);setErrorHistory([]);setLastErrorCount(0);setTimeLeft(newTimeLeft);// Reset refs\ntotalCharsRef.current=0;correctCharsRef.current=0;wpmRef.current=0;accuracyRef.current=100;// Return cleanup function\nreturn()=>{console.log('Component unmounting, cleaning up instance:',instanceId);isTimerRunningRef.current=false;if(timerRef.current){console.log('Cleanup clearing timer:',timerRef.current,'instance:',instanceId);clearInterval(timerRef.current);timerRef.current=null;}};},[getRandomText,selectedLanguage,selectedMode,getTestDuration]);// Start test\nconst startTest=()=>{// Check if already running to prevent multiple starts\nif(isTestActive||isTestComplete||isTimerRunningRef.current){console.log('Cannot start test - already active or timer running:',{isTestActive,isTestComplete,timerRunning:isTimerRunningRef.current});return;}console.log('Starting test... Timer ID:',timerId.current);// Clear any existing timer absolutely\nif(timerRef.current){console.log('Force clearing existing timer:',timerRef.current);clearInterval(timerRef.current);timerRef.current=null;}const newStartTime=new Date();const testDuration=getTestDuration(selectedMode);// Set all refs first before state\nisTimerRunningRef.current=true;startTimeRef.current=newStartTime;setIsTestActive(true);setStartTime(newStartTime);setTimeLeft(testDuration);console.log('Test started with duration:',testDuration,'seconds');console.log('Start time set to:',newStartTime);// Create timer with strict guards\nlet currentTime=testDuration;const intervalId=setInterval(()=>{// Double check we should still be running\nif(!isTimerRunningRef.current){console.log('Timer stopping - ref says not running');clearInterval(intervalId);return;}currentTime--;console.log('Timer tick, time left:',currentTime,'instance:',timerId.current);// Update React state\nsetTimeLeft(currentTime);if(currentTime<=0){console.log('Timer completed, calling completeTest');isTimerRunningRef.current=false;clearInterval(intervalId);completeTest();return;}// Record WPM data point every second - using a timeout to avoid React state issues\nsetTimeout(()=>recordWpmDataPoint(),10);},1000);timerRef.current=intervalId;console.log('Timer started with ID:',intervalId,'instance:',timerId.current);};// Reset test\nconst resetTest=()=>{console.log('resetTest called for instance:',timerId.current);// Aggressively stop timer\nisTimerRunningRef.current=false;if(timerRef.current){console.log('resetTest clearing timer:',timerRef.current);clearInterval(timerRef.current);timerRef.current=null;}setIsTestActive(false);setIsTestComplete(false);setUserInput('');setCurrentIndex(0);setWpm(0);setAccuracy(100);setCorrectChars(0);setTotalChars(0);setStartTime(null);startTimeRef.current=null;setWpmHistory([]);setErrorHistory([]);setLastErrorCount(0);// Reset refs\ntotalCharsRef.current=0;correctCharsRef.current=0;wpmRef.current=0;accuracyRef.current=100;const newTimeLeft=getTestDuration(selectedMode);console.log('resetTest setting timeLeft to:',newTimeLeft,'for mode:',selectedMode);setTimeLeft(newTimeLeft);// Select a new random text\nsetDisplayText(getRandomText(selectedLanguage));};// Handle input\nconst handleInput=e=>{if(isTestComplete)return;const value=e.currentTarget.value;console.log('handleInput called with value length:',value.length,'isTestActive:',isTestActive);// Check if this is a valid typing input (not just spaces or empty)\nconst hasValidContent=value.trim().length>0;// Update input and character counts first\nsetUserInput(value);setCurrentIndex(value.length);// Calculate accuracy\nlet correct=0;for(let i=0;i<value.length&&i<displayText.length;i++){if(value[i]===displayText[i]){correct++;}}setCorrectChars(correct);setTotalChars(value.length);// Update refs for timer callbacks\ncorrectCharsRef.current=correct;totalCharsRef.current=value.length;console.log('Updated character counts - totalChars:',value.length,'correctChars:',correct);if(value.length>0){const newAccuracy=Math.round(correct/value.length*100);setAccuracy(newAccuracy);accuracyRef.current=newAccuracy;}else{setAccuracy(100);// Reset to 100% when input is empty\naccuracyRef.current=100;}// Start test only if we have valid content and the first character matches\nif(!isTestActive&&hasValidContent&&value.length>0&&value[0]===displayText[0]){console.log('Starting test due to valid first input');startTest();}// If user reached the end of text, complete the test\nif(value.length>=displayText.length){console.log('Test completed: reached end of text');completeTest();return;}// Record data point for graph if test is active\nif(isTestActive&&startTime){recordWpmDataPoint();}};// Calculate WPM\nuseEffect(()=>{if(isTestActive&&startTime){const timeElapsed=(Date.now()-startTime.getTime())/1000;if(timeElapsed>0){const wordsTyped=userInput.length/5;// Standard: 5 characters = 1 word\nconst currentWpm=Math.round(wordsTyped/timeElapsed*60);setWpm(currentWpm);wpmRef.current=currentWpm;}}},[userInput,isTestActive,startTime]);// Record WPM data point for graph\nconst recordWpmDataPoint=useCallback(()=>{if(!startTime||!isTestActive)return;const totalDuration=getTestDuration(selectedMode);const secondsElapsed=totalDuration-timeLeft;if(secondsElapsed>0){const currentWpm=totalChars>0?Math.round(correctChars/5/(secondsElapsed/60)):0;const rawWpm=totalChars>0?Math.round(totalChars/5/(secondsElapsed/60)):0;const currentAccuracy=totalChars>0?Math.round(correctChars/totalChars*100):100;const totalCurrentErrors=totalChars-correctChars;const newErrors=totalCurrentErrors-lastErrorCount;setWpmHistory(prev=>[...prev,{time:secondsElapsed,wpm:currentWpm,raw:rawWpm,accuracy:currentAccuracy}]);setErrorHistory(prev=>[...prev,{time:secondsElapsed,errors:newErrors}]);setLastErrorCount(totalCurrentErrors);}},[startTime,isTestActive,timeLeft,totalChars,correctChars,selectedMode,getTestDuration,lastErrorCount]);// Cleanup\nuseEffect(()=>{return()=>{isTimerRunningRef.current=false;if(timerRef.current){clearInterval(timerRef.current);}};},[]);// Generate character display - Word-based line breaking with proper spacing\nconst getCharacterDisplay=()=>{var _lines$currentLineInd;const maxLineLength=windowWidth<576?40:windowWidth<768?55:windowWidth<1024?70:windowWidth<1440?85:100;// Split text into words and reconstruct with proper spacing\nconst words=displayText.split(' ');const lines=[];let currentLine=[];let currentLineLengthCount=0;for(let i=0;i<words.length;i++){const word=words[i];const wordLength=word.length;// Check if adding this word would exceed line length\nif(currentLineLengthCount+wordLength+(currentLine.length>0?1:0)>maxLineLength&&currentLine.length>0){// Start a new line\nlines.push(currentLine.join(' '));currentLine=[word];currentLineLengthCount=wordLength;}else{// Add word to current line\ncurrentLine.push(word);currentLineLengthCount+=wordLength+(currentLine.length>1?1:0);}}// Add the last line\nif(currentLine.length>0){lines.push(currentLine.join(' '));}// Find current line based on character position\nlet currentLineIndex=0;let charsSoFar=0;let charsInCurrentLine=0;for(let i=0;i<lines.length;i++){const lineLength=lines[i].length+(i<lines.length-1?1:0);// +1 for line break space\nif(currentIndex>=charsSoFar&&currentIndex<charsSoFar+lineLength){currentLineIndex=i;charsInCurrentLine=currentIndex-charsSoFar;break;}charsSoFar+=lineLength;}// Determine which lines to show based on position within current line\nlet startLineIndex;const currentLineLength=((_lines$currentLineInd=lines[currentLineIndex])===null||_lines$currentLineInd===void 0?void 0:_lines$currentLineInd.length)||0;const progressInLine=charsInCurrentLine/Math.max(currentLineLength,1);if(progressInLine<0.5){// User is in first half of current line, show current line as second line\nstartLineIndex=Math.max(0,currentLineIndex-1);}else{// User is in second half of current line, show current line as first line\nstartLineIndex=currentLineIndex;}// Show 3 lines starting from calculated start index\nconst visibleLines=[];for(let i=0;i<3;i++){const lineIndex=startLineIndex+i;if(lineIndex<lines.length){visibleLines.push({text:lines[lineIndex],originalIndex:lineIndex});}else{visibleLines.push({text:'',originalIndex:-1});// Empty line\n}}return visibleLines.map((lineData,displayIndex)=>{if(lineData.text===''){return/*#__PURE__*/_jsx(\"div\",{className:\"h-[2rem] flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-transparent\",children:\".\"})},`empty-${displayIndex}`);}// Calculate the starting character index for this line\nlet startIndex=0;for(let i=0;i<lineData.originalIndex;i++){if(i<lines.length){startIndex+=lines[i].length+(i<lines.length-1?1:0);}}const lineElements=lineData.text.split('').map((char,charIndex)=>{const globalIndex=startIndex+charIndex;let className='text-gray-400 dark:text-primary-300';// Default untyped\nif(globalIndex<userInput.length){if(userInput[globalIndex]===displayText[globalIndex]){className='text-gray-900 dark:text-[#ffca8d]';}else{className='text-red-500 bg-red-100 dark:text-red-400 dark:bg-red-900/30';}}else if(globalIndex===currentIndex&&isTestActive){className='bg-primary-600 text-white';}// Handle space characters specifically to make them visible\nif(char===' '){return/*#__PURE__*/_jsxs(\"span\",{className:className,children:['\\u00A0',\" \"]},globalIndex);}return/*#__PURE__*/_jsx(\"span\",{className:className,children:char},globalIndex);});return/*#__PURE__*/_jsx(\"div\",{className:\"h-[2rem] flex items-center justify-center whitespace-nowrap\",children:lineElements},displayIndex);});};// Submit test result to backend with provided values\nconst submitTestResultWithValues=useCallback(async(submitStartTime,submitTotalChars,submitWpm,submitAccuracy,submitCorrectChars)=>{console.log('submitTestResultWithValues called');console.log('User:',user);console.log('StartTime:',submitStartTime);console.log('Current state:',{wpm:submitWpm,accuracy:submitAccuracy,totalChars:submitTotalChars,correctChars:submitCorrectChars,displayText:displayText.length});if(!user){console.log('Cannot submit test result: user not logged in');return;}if(!submitStartTime){console.log('Cannot submit test result: test was never started (startTime is null)');return;}const testDuration=getTestDuration(selectedMode);const errorsCount=Math.max(0,submitTotalChars-submitCorrectChars);// Ensure we have valid data before submission - allow even minimal typing attempts\nif(submitTotalChars===0){console.log('Cannot submit test result: no characters typed',{totalChars:submitTotalChars,wpm:submitWpm});return;}const testData={wpm:Math.round(submitWpm),accuracy:Math.round(submitAccuracy),// accuracy is already a percentage (0-100)\nduration:testDuration,mode:'time',// Set as 'time' mode consistently\nlanguage:selectedLanguage,difficulty:'medium',charactersTyped:submitTotalChars,errorsCount:errorsCount,correctCharacters:submitCorrectChars,totalCharacters:displayText.length,testText:displayText.substring(0,Math.min(submitTotalChars,displayText.length)),text:displayText};console.log('Submitting test result:',testData);try{setIsSubmittingResult(true);const result=await typingAPI.submitTest(testData);console.log('Test result submitted successfully:',result);console.log('Result details:',result);}catch(error){console.error('Failed to submit test result:',error);console.error('Error details:',error);// Show more detailed error information\nif(error instanceof Error){console.error('Error message:',error.message);console.error('Error stack:',error.stack);}}finally{setIsSubmittingResult(false);}},[user,getTestDuration,selectedMode,selectedLanguage,displayText]);// Complete test and submit results\nconst completeTest=useCallback(async()=>{// Prevent multiple calls to completeTest\nif(isTestComplete){console.log('Test already completed, ignoring duplicate call');return;}// Stop timer first to prevent further calls\nisTimerRunningRef.current=false;if(timerRef.current){console.log('Clearing timer:',timerRef.current);clearInterval(timerRef.current);timerRef.current=null;}// Capture current values immediately to avoid stale closure issues\n// Use the refs for current values to ensure we have the actual latest values\nconst currentStartTime=startTimeRef.current||startTime;const currentTotalChars=totalCharsRef.current;const currentWpm=wpmRef.current;const currentAccuracy=accuracyRef.current;const currentCorrectChars=correctCharsRef.current;console.log('Test completed! Final stats:',{wpm:currentWpm,accuracy:currentAccuracy,totalChars:currentTotalChars,correctChars:currentCorrectChars,timeLeft,user:!!user,startTime:!!currentStartTime,startTimeValue:currentStartTime,startTimeFromRef:startTimeRef.current});setIsTestActive(false);setIsTestComplete(true);// Only submit result if user is logged in AND actually typed something\nif(user&&currentStartTime&&currentTotalChars>0){console.log('User is logged in and typed characters, submitting result...');// Use the captured values for submission\nawait submitTestResultWithValues(currentStartTime,currentTotalChars,currentWpm,currentAccuracy,currentCorrectChars);}else{console.log('Not submitting result:',{user:!!user,startTime:!!currentStartTime,totalChars:currentTotalChars});}},[isTestComplete,startTime,timeLeft,user,submitTestResultWithValues]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-white dark:bg-primary-900 text-gray-900 dark:text-primary-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-16\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-primary-700 dark:text-[#ffca8d] mb-4\",children:\"TurboKeys\"})}),!isTestActive&&!isTestComplete&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3 justify-center\",children:Object.values(TestMode).map(mode=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedMode(mode);resetTest();},className:`px-5 py-3 rounded-lg text-sm font-medium transition-colors ${selectedMode===mode?'bg-primary-600 text-white':'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'}`,children:mode},mode))}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3 justify-center\",children:Object.values(Language).map(language=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedLanguage(language);resetTest();},className:`px-5 py-3 rounded-lg text-sm font-medium transition-colors ${selectedLanguage===language?'bg-primary-600 text-white':'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'}`,children:language==='french'?'Français':'English'},language))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto px-4\",children:[isTestActive&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-12 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\",children:timeLeft}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\",children:wpm}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"WPM\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\",children:[accuracy,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Accuracy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative cursor-text w-full overflow-hidden mb-8\",style:{height:'140px'},onClick:()=>{if(!isTestComplete&&textAreaRef.current){textAreaRef.current.focus();}},children:[/*#__PURE__*/_jsx(\"div\",{className:`text-xl md:text-2xl font-mono max-w-full mx-auto h-full flex flex-col justify-center gap-1 px-4 md:px-8 transition-all duration-300 ${!isTestActive&&!isTestComplete?'blur-[1px]':''}`,style:{whiteSpace:'pre-wrap'},children:getCharacterDisplay()}),/*#__PURE__*/_jsx(\"textarea\",{ref:textAreaRef,value:userInput,onChange:handleInput,className:\"absolute inset-0 w-full h-full opacity-0 resize-none outline-none\",disabled:isTestComplete,placeholder:\"\"}),!isTestActive&&!isTestComplete&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/90 dark:bg-primary-800/90 backdrop-blur-sm rounded-lg px-6 py-4 shadow-lg border border-gray-200 dark:border-primary-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-700 dark:text-primary-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium mb-1\",children:\"Click in the text area and start typing\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm opacity-75 mb-2\",children:[\"Selected: \",selectedMode,\" \\u2022 \",selectedLanguage==='french'?'Français':'English']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs opacity-60\",children:\"Begin with the first character to start the timer\"})]})})})]}),isTestComplete&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-8 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d] mb-6\",children:\"Test Complete!\"}),wpmHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 bg-gray-50 dark:bg-primary-800 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Performance Over Time\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(LineChart,{data:wpmHistory.map((wpmPoint,index)=>{const errorPoint=errorHistory[index];return{...wpmPoint,errors:errorPoint&&errorPoint.errors>0?wpmPoint.wpm:null};}),children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#374151\",opacity:0.3}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"time\",stroke:\"#6B7280\",tick:{fontSize:12},tickFormatter:value=>`${value}s`}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#6B7280\",tick:{fontSize:12},domain:[0,'dataMax + 10']}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'#1F2937',border:'none',borderRadius:'8px',color:'#fff'},formatter:(value,name)=>{if(name==='wpm')return[`${value} WPM`,'WPM'];if(name==='raw')return[`${value} Raw`,'Raw WPM'];if(name==='accuracy')return[`${value}%`,'Accuracy'];if(name==='errors'){// Find the actual error count for this time point\nconst dataIndex=wpmHistory.findIndex(h=>h.wpm===value);const actualErrors=dataIndex>=0&&errorHistory[dataIndex]?errorHistory[dataIndex].errors:0;return[`${actualErrors} Error${actualErrors!==1?'s':''}`,'Errors'];}return[value,name];},labelFormatter:value=>`Time: ${value}s`}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"wpm\",stroke:\"#FBBF24\",strokeWidth:3,dot:{fill:'#FBBF24',strokeWidth:2,r:4},activeDot:{r:6,stroke:'#FBBF24',strokeWidth:2}}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"raw\",stroke:\"#6B7280\",strokeWidth:2,strokeDasharray:\"5 5\",dot:false}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"errors\",stroke:\"transparent\",strokeWidth:0,dot:{fill:'#EF4444',strokeWidth:0,r:4},activeDot:{r:6,stroke:'#EF4444',strokeWidth:2,fill:'#EF4444'},connectNulls:false})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-6 mt-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-yellow-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Net WPM\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-1 bg-gray-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Raw WPM\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-red-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Errors\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\",children:wpm}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"WPM\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-green-600 dark:text-green-400\",children:[accuracy,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Accuracy\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\",children:[correctChars,\"/\",totalChars]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Correct\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4 mb-8 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-blue-600 dark:text-blue-400\",children:wpmHistory.length>0?Math.max(...wpmHistory.map(h=>h.raw)):0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Raw\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-purple-600 dark:text-purple-400\",children:totalChars}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Characters\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-orange-600 dark:text-orange-400\",children:wpmHistory.length>0?Math.round(wpmHistory.reduce((sum,h)=>sum+h.wpm,0)/wpmHistory.length*100)/100:0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Consistency\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-semibold text-gray-600 dark:text-gray-400\",children:[getTestDuration(selectedMode),\"s\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\",children:\"Time\"})]})]}),user&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:isSubmittingResult?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2 text-yellow-600 dark:text-yellow-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Saving your result...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-green-600 dark:text-green-400 text-sm\",children:\"\\u2713 Result saved to your history\"})}),!user&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 text-gray-600 dark:text-gray-400 text-sm\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"text-primary-600 dark:text-primary-400 hover:underline\",children:\"Sign in\"}),\" to save your results and track your progress\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetTest,className:\"bg-primary-600 text-white px-8 py-3 rounded font-medium hover:bg-primary-700 transition-colors\",children:\"Try Again\"})]}),!isTestActive&&!isTestComplete&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500 dark:text-primary-400 mb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Focus on the text area above and start typing to begin the test\"})})]}),!isTestActive&&!isTestComplete&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto mt-20 text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 dark:text-primary-400 space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Click on the text area to start \\u2022 Type the words exactly as shown \\u2022 Use backspace to correct mistakes\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your WPM and accuracy will be calculated in real-time\"})]})})]})});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","TestMode","Language","typingAPI","useAuth","jsx","_jsx","jsxs","_jsxs","Home","user","selectedMode","setSelectedMode","THIRTY_SECONDS","selectedLanguage","setSelectedLanguage","ENGLISH","isTestActive","setIsTestActive","timeLeft","setTimeLeft","userInput","setUserInput","currentIndex","setCurrentIndex","wpm","setWpm","accuracy","setAccuracy","isTestComplete","setIsTestComplete","correctChars","setCorrectChars","totalChars","setTotalChars","startTime","setStartTime","isSubmittingResult","setIsSubmittingResult","wpmHistory","setWpmHistory","errorHistory","setErrorHistory","lastErrorCount","setLastErrorCount","windowWidth","setWindowWidth","window","innerWidth","textAreaRef","timerRef","isTimerRunningRef","startTimeRef","timerId","Math","random","totalCharsRef","correctCharsRef","wpmRef","accuracyRef","handleResize","addEventListener","removeEventListener","sampleTexts","english","french","getRandomText","language","texts","randomIndex","floor","length","getTestDuration","mode","FIFTEEN_SECONDS","SIXTY_SECONDS","ONE_TWENTY_SECONDS","displayText","setDisplayText","instanceId","current","console","log","newTimeLeft","clearInterval","startTest","timerRunning","newStartTime","Date","testDuration","currentTime","intervalId","setInterval","completeTest","setTimeout","recordWpmDataPoint","resetTest","handleInput","e","value","currentTarget","hasValidContent","trim","correct","i","newAccuracy","round","timeElapsed","now","getTime","wordsTyped","currentWpm","totalDuration","secondsElapsed","rawWpm","currentAccuracy","totalCurrentErrors","newErrors","prev","time","raw","errors","getCharacterDisplay","_lines$currentLineInd","maxLineLength","words","split","lines","currentLine","currentLineLengthCount","word","wordLength","push","join","currentLineIndex","charsSoFar","charsInCurrentLine","lineLength","startLineIndex","currentLineLength","progressInLine","max","visibleLines","lineIndex","text","originalIndex","map","lineData","displayIndex","className","children","startIndex","lineElements","char","charIndex","globalIndex","submitTestResultWithValues","submitStartTime","submitTotalChars","submitWpm","submitAccuracy","submitCorrectChars","errorsCount","testData","duration","difficulty","charactersTyped","correctCharacters","totalCharacters","testText","substring","min","result","submitTest","error","Error","message","stack","currentStartTime","currentTotalChars","currentCorrectChars","startTimeValue","startTimeFromRef","Object","values","onClick","style","height","focus","whiteSpace","ref","onChange","disabled","placeholder","width","data","wpmPoint","index","errorPoint","strokeDasharray","stroke","opacity","dataKey","tick","fontSize","tickFormatter","domain","contentStyle","backgroundColor","border","borderRadius","color","formatter","name","dataIndex","findIndex","h","actualErrors","labelFormatter","type","strokeWidth","dot","fill","r","activeDot","connectNulls","reduce","sum","href"],"sources":["C:/GitHub/TurboKeys/frontend/src/pages/Home.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { TestMode, Language } from '../types';\r\nimport { typingAPI } from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst Home: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [selectedMode, setSelectedMode] = useState<TestMode>(TestMode.THIRTY_SECONDS);\r\n  const [selectedLanguage, setSelectedLanguage] = useState<Language>(Language.ENGLISH);\r\n  const [isTestActive, setIsTestActive] = useState(false);\r\n  const [timeLeft, setTimeLeft] = useState(30); // This should match the default mode\r\n  const [userInput, setUserInput] = useState('');\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [wpm, setWpm] = useState(0);\r\n  const [accuracy, setAccuracy] = useState(100);\r\n  const [isTestComplete, setIsTestComplete] = useState(false);\r\n  const [correctChars, setCorrectChars] = useState(0);\r\n  const [totalChars, setTotalChars] = useState(0);\r\n  const [startTime, setStartTime] = useState<Date | null>(null);\r\n  const [isSubmittingResult, setIsSubmittingResult] = useState(false);\r\n  const [wpmHistory, setWpmHistory] = useState<{ time: number; wpm: number; raw: number; accuracy: number }[]>([]);\r\n  const [errorHistory, setErrorHistory] = useState<{ time: number; errors: number }[]>([]);\r\n  const [lastErrorCount, setLastErrorCount] = useState(0);\r\n  \r\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n  \r\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\r\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n  const isTimerRunningRef = useRef<boolean>(false);\r\n  const startTimeRef = useRef<Date | null>(null);\r\n  const timerId = useRef<number>(Math.random()); // Unique ID for this component instance\r\n  \r\n  // Add refs to store current values for timer callbacks\r\n  const totalCharsRef = useRef<number>(0);\r\n  const correctCharsRef = useRef<number>(0);\r\n  const wpmRef = useRef<number>(0);\r\n  const accuracyRef = useRef<number>(100);\r\n\r\n  // Listen for window resize\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowWidth(window.innerWidth);\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  // Sample texts for different languages - Multiple paragraphs for variety\r\n  const sampleTexts = useCallback(() => ({\r\n    english: [\r\n      \"The art of communication has evolved dramatically throughout human history, transforming from simple gestures and sounds into sophisticated systems of written and spoken language. In today's digital age, the ability to type quickly and accurately has become an essential skill for personal and professional success. Whether you're writing emails, creating documents, programming software, or engaging in online conversations, your typing speed and accuracy directly impact your productivity and effectiveness. The development of muscle memory through consistent practice allows your fingers to move automatically across the keyboard, reducing the cognitive load required for typing and freeing your mind to focus on the content and ideas you want to express. Modern typing techniques emphasize proper posture, correct finger placement, and smooth, rhythmic keystrokes that minimize fatigue and maximize efficiency.\",\r\n      \"Technology has revolutionized the way we work, learn, and connect with others across the globe. From artificial intelligence and machine learning to virtual reality and blockchain, innovative solutions are reshaping industries and creating new opportunities for growth and collaboration. The rapid pace of technological advancement requires continuous learning and adaptation, as professionals must stay current with emerging trends and tools. Digital literacy has become as fundamental as traditional reading and writing skills, enabling individuals to navigate complex information systems and participate fully in the modern economy. Social media platforms, cloud computing services, and mobile applications have transformed how we share information, conduct business, and maintain relationships.\",\r\n      \"The natural world offers countless lessons about resilience, adaptation, and interconnectedness that can inspire and guide human behavior. Ecosystems demonstrate remarkable balance and efficiency, with each species playing a crucial role in maintaining environmental stability. Climate change and environmental degradation pose significant challenges that require collective action and innovative solutions from governments, businesses, and individuals. Sustainable practices, renewable energy sources, and conservation efforts are essential for preserving biodiversity and ensuring a healthy planet for future generations. Scientific research continues to reveal the intricate relationships between organisms and their environments, highlighting the importance of protecting natural habitats and reducing human impact on delicate ecological systems.\",\r\n      \"Education serves as the foundation for personal growth, critical thinking, and societal progress, empowering individuals to reach their full potential and contribute meaningfully to their communities. The traditional classroom model is evolving to incorporate online learning, interactive technologies, and personalized instruction that accommodates diverse learning styles and schedules. Lifelong learning has become increasingly important as career paths become more dynamic and skills requirements change rapidly in response to technological and economic shifts. Educators are exploring innovative teaching methods, collaborative projects, and real-world applications to engage students and prepare them for success in an interconnected global society.\",\r\n      \"The power of creativity and imagination drives innovation, artistic expression, and problem-solving across all aspects of human endeavor. Whether through literature, music, visual arts, or scientific discovery, creative thinking challenges conventional wisdom and opens new possibilities for understanding and improving the world around us. Collaborative creativity, where diverse perspectives and expertise combine to generate novel solutions, has proven particularly effective in addressing complex challenges that require multidisciplinary approaches. The creative process involves risk-taking, experimentation, and the willingness to learn from failure, qualities that are essential for personal and professional development in an uncertain and rapidly changing environment.\"\r\n    ],\r\n    french: [\r\n      \"L'évolution de la technologie moderne a transformé notre façon de communiquer, de travailler et d'interagir avec le monde qui nous entoure. Dans cette ère numérique, la maîtrise du clavier est devenue une compétence fondamentale qui influence directement notre productivité et notre efficacité professionnelle. La France, avec sa riche tradition littéraire et culturelle, a toujours valorisé l'expression écrite comme un art noble et raffiné. Aujourd'hui, cette tradition se prolonge dans le domaine numérique, où la capacité à taper rapidement et précisément en français constitue un atout considérable pour les étudiants, les professionnels et les créateurs de contenu. Les particularités de la langue française, avec ses accents, ses cédilles et ses caractères spéciaux, exigent une attention particulière lors de l'apprentissage de la dactylographie.\",\r\n      \"La culture française rayonne dans le monde entier à travers sa gastronomie, son art, sa littérature et son cinéma, créant des liens durables entre les peuples et enrichissant le patrimoine mondial de l'humanité. Les chefs français ont révolutionné l'art culinaire en développant des techniques sophistiquées et en valorisant la qualité des ingrédients locaux et saisonniers. Les musées français, notamment le Louvre, Orsay et le Centre Pompidou, abritent des collections exceptionnelles qui attirent des millions de visiteurs chaque année et contribuent au rayonnement culturel du pays. La langue française, parlée sur cinq continents, demeure un vecteur privilégié d'échanges diplomatiques, scientifiques et artistiques entre les nations francophones.\",\r\n      \"L'innovation technologique française se distingue par son approche humaniste et son engagement envers le développement durable, plaçant l'éthique et la responsabilité sociale au cœur des avancées scientifiques. Les startups françaises excellent dans des domaines variés comme l'intelligence artificielle, la biotechnologie, l'énergie renouvelable et la mobilité urbaine. Le système éducatif français forme des ingénieurs et des chercheurs reconnus internationalement pour leur rigueur méthodologique et leur capacité d'innovation. Les pôles de compétitivité régionaux favorisent la collaboration entre universités, centres de recherche et entreprises, créant un écosystème propice à l'émergence de solutions innovantes pour relever les défis contemporains.\",\r\n      \"L'histoire de France témoigne d'une longue tradition de résistance, de révolution et de progrès social qui continue d'inspirer les mouvements démocratiques dans le monde entier. Les idéaux de liberté, d'égalité et de fraternité proclamés lors de la Révolution française restent des références universelles pour les sociétés en quête de justice et de dignité humaine. Le système de protection sociale français, avec ses prestations familiales, son assurance maladie universelle et ses retraites solidaires, constitue un modèle envié qui concilie efficacité économique et cohésion sociale. La laïcité à la française offre un cadre unique pour garantir la liberté de conscience tout en préservant l'unité républicaine dans le respect de la diversité des convictions.\",\r\n      \"L'art de vivre français privilégie l'équilibre entre travail et loisirs, accordant une importance particulière aux plaisirs simples de l'existence comme les repas partagés, les promenades dans la nature et les conversations enrichissantes. Cette philosophie de vie valorise la qualité plutôt que la quantité, encourageant une approche réfléchie de la consommation et des relations humaines. Les marchés français, avec leurs produits locaux et leurs producteurs passionnés, incarnent cette quête d'authenticité et de proximité qui caractérise l'identité française. La préservation du patrimoine architectural et naturel reflète l'attachement profond des Français à leur histoire et à leur environnement, transmettant aux générations futures un héritage d'une richesse exceptionnelle.\"\r\n    ]\r\n  }), []);\r\n\r\n  // Get random text for the selected language\r\n  const getRandomText = useCallback((language: Language): string => {\r\n    const texts = sampleTexts()[language];\r\n    const randomIndex = Math.floor(Math.random() * texts.length);\r\n    return texts[randomIndex];\r\n  }, [sampleTexts]);\r\n\r\n  // Get test duration\r\n  const getTestDuration = useCallback((mode: TestMode): number => {\r\n    switch (mode) {\r\n      case TestMode.FIFTEEN_SECONDS: return 15;\r\n      case TestMode.THIRTY_SECONDS: return 30;\r\n      case TestMode.SIXTY_SECONDS: return 60;\r\n      case TestMode.ONE_TWENTY_SECONDS: return 120;\r\n      default: return 30;\r\n    }\r\n  }, []);\r\n\r\n  // State for current display text\r\n  const [displayText, setDisplayText] = useState('');\r\n\r\n  // Initialize with random text on component mount (page load) and when language/mode changes\r\n  useEffect(() => {\r\n    const instanceId = timerId.current;\r\n    console.log('Component mount or language/mode changed, resetting test for instance:', instanceId);\r\n    const newTimeLeft = getTestDuration(selectedMode);\r\n    console.log('Setting timeLeft to:', newTimeLeft, 'for mode:', selectedMode, 'instance:', instanceId);\r\n    \r\n    // Aggressively stop any running timer\r\n    isTimerRunningRef.current = false;\r\n    if (timerRef.current) {\r\n      console.log('useEffect clearing timer:', timerRef.current, 'instance:', instanceId);\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    \r\n    setDisplayText(getRandomText(selectedLanguage));\r\n    setIsTestActive(false);\r\n    setIsTestComplete(false);\r\n    setUserInput('');\r\n    setCurrentIndex(0);\r\n    setWpm(0);\r\n    setAccuracy(100);\r\n    setCorrectChars(0);\r\n    setTotalChars(0);\r\n    setStartTime(null);\r\n    startTimeRef.current = null;\r\n    setWpmHistory([]);\r\n    setErrorHistory([]);\r\n    setLastErrorCount(0);\r\n    setTimeLeft(newTimeLeft);\r\n\r\n    // Reset refs\r\n    totalCharsRef.current = 0;\r\n    correctCharsRef.current = 0;\r\n    wpmRef.current = 0;\r\n    accuracyRef.current = 100;\r\n\r\n    // Return cleanup function\r\n    return () => {\r\n      console.log('Component unmounting, cleaning up instance:', instanceId);\r\n      isTimerRunningRef.current = false;\r\n      if (timerRef.current) {\r\n        console.log('Cleanup clearing timer:', timerRef.current, 'instance:', instanceId);\r\n        clearInterval(timerRef.current);\r\n        timerRef.current = null;\r\n      }\r\n    };\r\n  }, [getRandomText, selectedLanguage, selectedMode, getTestDuration]);\r\n\r\n  // Start test\r\n  const startTest = () => {\r\n    // Check if already running to prevent multiple starts\r\n    if (isTestActive || isTestComplete || isTimerRunningRef.current) {\r\n      console.log('Cannot start test - already active or timer running:', {\r\n        isTestActive, \r\n        isTestComplete, \r\n        timerRunning: isTimerRunningRef.current\r\n      });\r\n      return;\r\n    }\r\n\r\n    console.log('Starting test... Timer ID:', timerId.current);\r\n    \r\n    // Clear any existing timer absolutely\r\n    if (timerRef.current) {\r\n      console.log('Force clearing existing timer:', timerRef.current);\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    \r\n    const newStartTime = new Date();\r\n    const testDuration = getTestDuration(selectedMode);\r\n    \r\n    // Set all refs first before state\r\n    isTimerRunningRef.current = true;\r\n    startTimeRef.current = newStartTime;\r\n    \r\n    setIsTestActive(true);\r\n    setStartTime(newStartTime);\r\n    setTimeLeft(testDuration);\r\n    \r\n    console.log('Test started with duration:', testDuration, 'seconds');\r\n    console.log('Start time set to:', newStartTime);\r\n    \r\n    // Create timer with strict guards\r\n    let currentTime = testDuration;\r\n    \r\n    const intervalId = setInterval(() => {\r\n      // Double check we should still be running\r\n      if (!isTimerRunningRef.current) {\r\n        console.log('Timer stopping - ref says not running');\r\n        clearInterval(intervalId);\r\n        return;\r\n      }\r\n      \r\n      currentTime--;\r\n      console.log('Timer tick, time left:', currentTime, 'instance:', timerId.current);\r\n      \r\n      // Update React state\r\n      setTimeLeft(currentTime);\r\n      \r\n      if (currentTime <= 0) {\r\n        console.log('Timer completed, calling completeTest');\r\n        isTimerRunningRef.current = false;\r\n        clearInterval(intervalId);\r\n        completeTest();\r\n        return;\r\n      }\r\n      \r\n      // Record WPM data point every second - using a timeout to avoid React state issues\r\n      setTimeout(() => recordWpmDataPoint(), 10);\r\n    }, 1000);\r\n    \r\n    timerRef.current = intervalId;\r\n    console.log('Timer started with ID:', intervalId, 'instance:', timerId.current);\r\n  };\r\n\r\n  // Reset test\r\n  const resetTest = () => {\r\n    console.log('resetTest called for instance:', timerId.current);\r\n    \r\n    // Aggressively stop timer\r\n    isTimerRunningRef.current = false;\r\n    if (timerRef.current) {\r\n      console.log('resetTest clearing timer:', timerRef.current);\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    \r\n    setIsTestActive(false);\r\n    setIsTestComplete(false);\r\n    setUserInput('');\r\n    setCurrentIndex(0);\r\n    setWpm(0);\r\n    setAccuracy(100);\r\n    setCorrectChars(0);\r\n    setTotalChars(0);\r\n    setStartTime(null);\r\n    startTimeRef.current = null;\r\n    setWpmHistory([]);\r\n    setErrorHistory([]);\r\n    setLastErrorCount(0);\r\n    \r\n    // Reset refs\r\n    totalCharsRef.current = 0;\r\n    correctCharsRef.current = 0;\r\n    wpmRef.current = 0;\r\n    accuracyRef.current = 100;\r\n    \r\n    const newTimeLeft = getTestDuration(selectedMode);\r\n    console.log('resetTest setting timeLeft to:', newTimeLeft, 'for mode:', selectedMode);\r\n    setTimeLeft(newTimeLeft);\r\n    \r\n    // Select a new random text\r\n    setDisplayText(getRandomText(selectedLanguage));\r\n  };\r\n\r\n  // Handle input\r\n  const handleInput = (e: React.FormEvent<HTMLTextAreaElement>) => {\r\n    if (isTestComplete) return;\r\n    \r\n    const value = e.currentTarget.value;\r\n    console.log('handleInput called with value length:', value.length, 'isTestActive:', isTestActive);\r\n    \r\n    // Check if this is a valid typing input (not just spaces or empty)\r\n    const hasValidContent = value.trim().length > 0;\r\n    \r\n    // Update input and character counts first\r\n    setUserInput(value);\r\n    setCurrentIndex(value.length);\r\n    \r\n    // Calculate accuracy\r\n    let correct = 0;\r\n    for (let i = 0; i < value.length && i < displayText.length; i++) {\r\n      if (value[i] === displayText[i]) {\r\n        correct++;\r\n      }\r\n    }\r\n    setCorrectChars(correct);\r\n    setTotalChars(value.length);\r\n    \r\n    // Update refs for timer callbacks\r\n    correctCharsRef.current = correct;\r\n    totalCharsRef.current = value.length;\r\n    \r\n    console.log('Updated character counts - totalChars:', value.length, 'correctChars:', correct);\r\n    \r\n    if (value.length > 0) {\r\n      const newAccuracy = Math.round((correct / value.length) * 100);\r\n      setAccuracy(newAccuracy);\r\n      accuracyRef.current = newAccuracy;\r\n    } else {\r\n      setAccuracy(100); // Reset to 100% when input is empty\r\n      accuracyRef.current = 100;\r\n    }\r\n    \r\n    // Start test only if we have valid content and the first character matches\r\n    if (!isTestActive && hasValidContent && value.length > 0 && value[0] === displayText[0]) {\r\n      console.log('Starting test due to valid first input');\r\n      startTest();\r\n    }\r\n    \r\n    // If user reached the end of text, complete the test\r\n    if (value.length >= displayText.length) {\r\n      console.log('Test completed: reached end of text');\r\n      completeTest();\r\n      return;\r\n    }\r\n    \r\n    // Record data point for graph if test is active\r\n    if (isTestActive && startTime) {\r\n      recordWpmDataPoint();\r\n    }\r\n  };\r\n\r\n  // Calculate WPM\r\n  useEffect(() => {\r\n    if (isTestActive && startTime) {\r\n      const timeElapsed = (Date.now() - startTime.getTime()) / 1000;\r\n      if (timeElapsed > 0) {\r\n        const wordsTyped = userInput.length / 5; // Standard: 5 characters = 1 word\r\n        const currentWpm = Math.round((wordsTyped / timeElapsed) * 60);\r\n        setWpm(currentWpm);\r\n        wpmRef.current = currentWpm;\r\n      }\r\n    }\r\n  }, [userInput, isTestActive, startTime]);\r\n\r\n  // Record WPM data point for graph\r\n  const recordWpmDataPoint = useCallback(() => {\r\n    if (!startTime || !isTestActive) return;\r\n    \r\n    const totalDuration = getTestDuration(selectedMode);\r\n    const secondsElapsed = totalDuration - timeLeft;\r\n    \r\n    if (secondsElapsed > 0) {\r\n      const currentWpm = totalChars > 0 ? Math.round((correctChars / 5) / (secondsElapsed / 60)) : 0;\r\n      const rawWpm = totalChars > 0 ? Math.round((totalChars / 5) / (secondsElapsed / 60)) : 0;\r\n      const currentAccuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;\r\n      const totalCurrentErrors = totalChars - correctChars;\r\n      const newErrors = totalCurrentErrors - lastErrorCount;\r\n      \r\n      setWpmHistory(prev => [\r\n        ...prev,\r\n        {\r\n          time: secondsElapsed,\r\n          wpm: currentWpm,\r\n          raw: rawWpm,\r\n          accuracy: currentAccuracy\r\n        }\r\n      ]);\r\n      \r\n      setErrorHistory(prev => [\r\n        ...prev,\r\n        {\r\n          time: secondsElapsed,\r\n          errors: newErrors\r\n        }\r\n      ]);\r\n      \r\n      setLastErrorCount(totalCurrentErrors);\r\n    }\r\n  }, [startTime, isTestActive, timeLeft, totalChars, correctChars, selectedMode, getTestDuration, lastErrorCount]);\r\n\r\n  // Cleanup\r\n  useEffect(() => {\r\n    return () => {\r\n      isTimerRunningRef.current = false;\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Generate character display - Word-based line breaking with proper spacing\r\n  const getCharacterDisplay = () => {\r\n    const maxLineLength = windowWidth < 576 ? 40 : windowWidth < 768 ? 55 : windowWidth < 1024 ? 70 : windowWidth < 1440 ? 85 : 100;\r\n    \r\n    // Split text into words and reconstruct with proper spacing\r\n    const words = displayText.split(' ');\r\n    const lines: string[] = [];\r\n    let currentLine: string[] = [];\r\n    let currentLineLengthCount = 0;\r\n    \r\n    for (let i = 0; i < words.length; i++) {\r\n      const word = words[i];\r\n      const wordLength = word.length;\r\n      \r\n      // Check if adding this word would exceed line length\r\n      if (currentLineLengthCount + wordLength + (currentLine.length > 0 ? 1 : 0) > maxLineLength && currentLine.length > 0) {\r\n        // Start a new line\r\n        lines.push(currentLine.join(' '));\r\n        currentLine = [word];\r\n        currentLineLengthCount = wordLength;\r\n      } else {\r\n        // Add word to current line\r\n        currentLine.push(word);\r\n        currentLineLengthCount += wordLength + (currentLine.length > 1 ? 1 : 0);\r\n      }\r\n    }\r\n    \r\n    // Add the last line\r\n    if (currentLine.length > 0) {\r\n      lines.push(currentLine.join(' '));\r\n    }\r\n    \r\n    // Find current line based on character position\r\n    let currentLineIndex = 0;\r\n    let charsSoFar = 0;\r\n    let charsInCurrentLine = 0;\r\n    \r\n    for (let i = 0; i < lines.length; i++) {\r\n      const lineLength = lines[i].length + (i < lines.length - 1 ? 1 : 0); // +1 for line break space\r\n      if (currentIndex >= charsSoFar && currentIndex < charsSoFar + lineLength) {\r\n        currentLineIndex = i;\r\n        charsInCurrentLine = currentIndex - charsSoFar;\r\n        break;\r\n      }\r\n      charsSoFar += lineLength;\r\n    }\r\n    \r\n    // Determine which lines to show based on position within current line\r\n    let startLineIndex;\r\n    const currentLineLength = lines[currentLineIndex]?.length || 0;\r\n    const progressInLine = charsInCurrentLine / Math.max(currentLineLength, 1);\r\n    \r\n    if (progressInLine < 0.5) {\r\n      // User is in first half of current line, show current line as second line\r\n      startLineIndex = Math.max(0, currentLineIndex - 1);\r\n    } else {\r\n      // User is in second half of current line, show current line as first line\r\n      startLineIndex = currentLineIndex;\r\n    }\r\n    \r\n    // Show 3 lines starting from calculated start index\r\n    const visibleLines = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      const lineIndex = startLineIndex + i;\r\n      if (lineIndex < lines.length) {\r\n        visibleLines.push({ text: lines[lineIndex], originalIndex: lineIndex });\r\n      } else {\r\n        visibleLines.push({ text: '', originalIndex: -1 }); // Empty line\r\n      }\r\n    }\r\n    \r\n    return visibleLines.map((lineData, displayIndex) => {\r\n      if (lineData.text === '') {\r\n        return (\r\n          <div key={`empty-${displayIndex}`} className=\"h-[2rem] flex items-center justify-center\">\r\n            <span className=\"text-transparent\">.</span>\r\n          </div>\r\n        );\r\n      }\r\n      \r\n      // Calculate the starting character index for this line\r\n      let startIndex = 0;\r\n      for (let i = 0; i < lineData.originalIndex; i++) {\r\n        if (i < lines.length) {\r\n          startIndex += lines[i].length + (i < lines.length - 1 ? 1 : 0);\r\n        }\r\n      }\r\n      \r\n      const lineElements = lineData.text.split('').map((char: string, charIndex: number) => {\r\n        const globalIndex = startIndex + charIndex;\r\n        let className = 'text-gray-400 dark:text-primary-300'; // Default untyped\r\n        \r\n        if (globalIndex < userInput.length) {\r\n          if (userInput[globalIndex] === displayText[globalIndex]) {\r\n            className = 'text-gray-900 dark:text-[#ffca8d]';\r\n          } else {\r\n            className = 'text-red-500 bg-red-100 dark:text-red-400 dark:bg-red-900/30';\r\n          }\r\n        } else if (globalIndex === currentIndex && isTestActive) {\r\n          className = 'bg-primary-600 text-white';\r\n        }\r\n        \r\n        // Handle space characters specifically to make them visible\r\n        if (char === ' ') {\r\n          return (\r\n            <span key={globalIndex} className={className}>\r\n              {'\\u00A0'} {/* Non-breaking space to make it visible */}\r\n            </span>\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <span key={globalIndex} className={className}>\r\n            {char}\r\n          </span>\r\n        );\r\n      });\r\n      \r\n      return (\r\n        <div key={displayIndex} className=\"h-[2rem] flex items-center justify-center whitespace-nowrap\">\r\n          {lineElements}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  // Submit test result to backend with provided values\r\n  const submitTestResultWithValues = useCallback(async (\r\n    submitStartTime: Date,\r\n    submitTotalChars: number, \r\n    submitWpm: number,\r\n    submitAccuracy: number,\r\n    submitCorrectChars: number\r\n  ) => {\r\n    console.log('submitTestResultWithValues called');\r\n    console.log('User:', user);\r\n    console.log('StartTime:', submitStartTime);\r\n    console.log('Current state:', { \r\n      wpm: submitWpm, \r\n      accuracy: submitAccuracy, \r\n      totalChars: submitTotalChars, \r\n      correctChars: submitCorrectChars, \r\n      displayText: displayText.length \r\n    });\r\n    \r\n    if (!user) {\r\n      console.log('Cannot submit test result: user not logged in');\r\n      return;\r\n    }\r\n\r\n    if (!submitStartTime) {\r\n      console.log('Cannot submit test result: test was never started (startTime is null)');\r\n      return;\r\n    }\r\n\r\n    const testDuration = getTestDuration(selectedMode);\r\n    const errorsCount = Math.max(0, submitTotalChars - submitCorrectChars);\r\n\r\n    // Ensure we have valid data before submission - allow even minimal typing attempts\r\n    if (submitTotalChars === 0) {\r\n      console.log('Cannot submit test result: no characters typed', { totalChars: submitTotalChars, wpm: submitWpm });\r\n      return;\r\n    }\r\n\r\n    const testData = {\r\n      wpm: Math.round(submitWpm),\r\n      accuracy: Math.round(submitAccuracy), // accuracy is already a percentage (0-100)\r\n      duration: testDuration,\r\n      mode: 'time', // Set as 'time' mode consistently\r\n      language: selectedLanguage,\r\n      difficulty: 'medium',\r\n      charactersTyped: submitTotalChars,\r\n      errorsCount: errorsCount,\r\n      correctCharacters: submitCorrectChars,\r\n      totalCharacters: displayText.length,\r\n      testText: displayText.substring(0, Math.min(submitTotalChars, displayText.length)),\r\n      text: displayText\r\n    };\r\n\r\n    console.log('Submitting test result:', testData);\r\n\r\n    try {\r\n      setIsSubmittingResult(true);\r\n      const result = await typingAPI.submitTest(testData);\r\n      console.log('Test result submitted successfully:', result);\r\n      console.log('Result details:', result);\r\n    } catch (error) {\r\n      console.error('Failed to submit test result:', error);\r\n      console.error('Error details:', error);\r\n      // Show more detailed error information\r\n      if (error instanceof Error) {\r\n        console.error('Error message:', error.message);\r\n        console.error('Error stack:', error.stack);\r\n      }\r\n    } finally {\r\n      setIsSubmittingResult(false);\r\n    }\r\n  }, [user, getTestDuration, selectedMode, selectedLanguage, displayText]);\r\n\r\n  // Complete test and submit results\r\n  const completeTest = useCallback(async () => {\r\n    // Prevent multiple calls to completeTest\r\n    if (isTestComplete) {\r\n      console.log('Test already completed, ignoring duplicate call');\r\n      return;\r\n    }\r\n    \r\n    // Stop timer first to prevent further calls\r\n    isTimerRunningRef.current = false;\r\n    if (timerRef.current) {\r\n      console.log('Clearing timer:', timerRef.current);\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    \r\n    // Capture current values immediately to avoid stale closure issues\r\n    // Use the refs for current values to ensure we have the actual latest values\r\n    const currentStartTime = startTimeRef.current || startTime;\r\n    const currentTotalChars = totalCharsRef.current;\r\n    const currentWpm = wpmRef.current;\r\n    const currentAccuracy = accuracyRef.current;\r\n    const currentCorrectChars = correctCharsRef.current;\r\n    \r\n    console.log('Test completed! Final stats:', { \r\n      wpm: currentWpm, \r\n      accuracy: currentAccuracy, \r\n      totalChars: currentTotalChars, \r\n      correctChars: currentCorrectChars, \r\n      timeLeft,\r\n      user: !!user,\r\n      startTime: !!currentStartTime,\r\n      startTimeValue: currentStartTime,\r\n      startTimeFromRef: startTimeRef.current\r\n    });\r\n    \r\n    setIsTestActive(false);\r\n    setIsTestComplete(true);\r\n\r\n    // Only submit result if user is logged in AND actually typed something\r\n    if (user && currentStartTime && currentTotalChars > 0) {\r\n      console.log('User is logged in and typed characters, submitting result...');\r\n      // Use the captured values for submission\r\n      await submitTestResultWithValues(currentStartTime, currentTotalChars, currentWpm, currentAccuracy, currentCorrectChars);\r\n    } else {\r\n      console.log('Not submitting result:', { \r\n        user: !!user, \r\n        startTime: !!currentStartTime, \r\n        totalChars: currentTotalChars \r\n      });\r\n    }\r\n  }, [isTestComplete, startTime, timeLeft, user, submitTestResultWithValues]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white dark:bg-primary-900 text-gray-900 dark:text-primary-100\">\r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        {/* Header - Clean and minimal */}\r\n        <div className=\"text-center mb-16\">\r\n          <h1 className=\"text-4xl font-bold text-primary-700 dark:text-[#ffca8d] mb-4\">\r\n            TurboKeys\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Mode Selection - Clean and centered */}\r\n        {!isTestActive && !isTestComplete && (\r\n          <div className=\"flex justify-center mb-16\">\r\n            <div className=\"flex flex-col items-center gap-8\">\r\n              <div className=\"flex flex-wrap gap-3 justify-center\">\r\n                {Object.values(TestMode).map((mode) => (\r\n                  <button\r\n                    key={mode}\r\n                    onClick={() => {\r\n                      setSelectedMode(mode);\r\n                      resetTest();\r\n                    }}\r\n                    className={`px-5 py-3 rounded-lg text-sm font-medium transition-colors ${\r\n                      selectedMode === mode\r\n                        ? 'bg-primary-600 text-white'\r\n                        : 'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'\r\n                    }`}\r\n                  >\r\n                    {mode}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"flex flex-wrap gap-3 justify-center\">\r\n                {Object.values(Language).map((language) => (\r\n                  <button\r\n                    key={language}\r\n                    onClick={() => {\r\n                      setSelectedLanguage(language);\r\n                      resetTest();\r\n                    }}\r\n                    className={`px-5 py-3 rounded-lg text-sm font-medium transition-colors ${\r\n                      selectedLanguage === language\r\n                        ? 'bg-primary-600 text-white'\r\n                        : 'bg-gray-200 dark:bg-primary-800 text-gray-700 dark:text-primary-200 hover:bg-gray-300 dark:hover:bg-primary-700 hover:text-gray-900 dark:hover:text-primary-100'\r\n                    }`}\r\n                  >\r\n                    {language === 'french' ? 'Français' : 'English'}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Typing Test - Clean centered layout like MonkeyType */}\r\n        <div className=\"mx-auto px-4\">\r\n          {/* Stats Display - Show during active test */}\r\n          {isTestActive && (\r\n            <div className=\"flex justify-center space-x-12 mb-8\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\">{timeLeft}</div>\r\n                <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Time</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\">{wpm}</div>\r\n                <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">WPM</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d]\">{accuracy}%</div>\r\n                <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Accuracy</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Typing Area */}\r\n          <div \r\n            className=\"relative cursor-text w-full overflow-hidden mb-8\"\r\n            style={{ height: '140px' }}\r\n            onClick={() => {\r\n              if (!isTestComplete && textAreaRef.current) {\r\n                textAreaRef.current.focus();\r\n              }\r\n            }}\r\n          >\r\n            <div className={`text-xl md:text-2xl font-mono max-w-full mx-auto h-full flex flex-col justify-center gap-1 px-4 md:px-8 transition-all duration-300 ${!isTestActive && !isTestComplete ? 'blur-[1px]' : ''}`} style={{ whiteSpace: 'pre-wrap' }}>\r\n              {getCharacterDisplay()}\r\n            </div>\r\n            \r\n            {/* Invisible textarea for input */}\r\n            <textarea\r\n              ref={textAreaRef}\r\n              value={userInput}\r\n              onChange={handleInput}\r\n              className=\"absolute inset-0 w-full h-full opacity-0 resize-none outline-none\"\r\n              disabled={isTestComplete}\r\n              placeholder=\"\"\r\n            />\r\n            \r\n            {/* Focus overlay */}\r\n            {!isTestActive && !isTestComplete && (\r\n              <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                <div className=\"bg-white/90 dark:bg-primary-800/90 backdrop-blur-sm rounded-lg px-6 py-4 shadow-lg border border-gray-200 dark:border-primary-700\">\r\n                  <div className=\"text-center text-gray-700 dark:text-primary-200\">\r\n                    <p className=\"text-lg font-medium mb-1\">Click in the text area and start typing</p>\r\n                    <p className=\"text-sm opacity-75 mb-2\">Selected: {selectedMode} • {selectedLanguage === 'french' ? 'Français' : 'English'}</p>\r\n                    <p className=\"text-xs opacity-60\">Begin with the first character to start the timer</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Test Complete Screen */}\r\n          {isTestComplete && (\r\n            <div className=\"text-center p-8 mb-6\">\r\n              <h2 className=\"text-2xl font-bold text-primary-600 dark:text-[#ffca8d] mb-6\">Test Complete!</h2>\r\n              \r\n              {/* Performance Graph */}\r\n              {wpmHistory.length > 0 && (\r\n                <div className=\"mb-8 bg-gray-50 dark:bg-primary-800 rounded-lg p-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Performance Over Time</h3>\r\n                  <div className=\"h-64\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <LineChart data={wpmHistory.map((wpmPoint, index) => {\r\n                        const errorPoint = errorHistory[index];\r\n                        return {\r\n                          ...wpmPoint,\r\n                          errors: errorPoint && errorPoint.errors > 0 ? wpmPoint.wpm : null\r\n                        };\r\n                      })}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" opacity={0.3} />\r\n                        <XAxis \r\n                          dataKey=\"time\" \r\n                          stroke=\"#6B7280\"\r\n                          tick={{ fontSize: 12 }}\r\n                          tickFormatter={(value) => `${value}s`}\r\n                        />\r\n                        <YAxis \r\n                          stroke=\"#6B7280\"\r\n                          tick={{ fontSize: 12 }}\r\n                          domain={[0, 'dataMax + 10']}\r\n                        />\r\n                        <Tooltip \r\n                          contentStyle={{ \r\n                            backgroundColor: '#1F2937', \r\n                            border: 'none', \r\n                            borderRadius: '8px',\r\n                            color: '#fff'\r\n                          }}\r\n                          formatter={(value: any, name: string) => {\r\n                            if (name === 'wpm') return [`${value} WPM`, 'WPM'];\r\n                            if (name === 'raw') return [`${value} Raw`, 'Raw WPM'];\r\n                            if (name === 'accuracy') return [`${value}%`, 'Accuracy'];\r\n                            if (name === 'errors') {\r\n                              // Find the actual error count for this time point\r\n                              const dataIndex = wpmHistory.findIndex(h => h.wpm === value);\r\n                              const actualErrors = dataIndex >= 0 && errorHistory[dataIndex] ? errorHistory[dataIndex].errors : 0;\r\n                              return [`${actualErrors} Error${actualErrors !== 1 ? 's' : ''}`, 'Errors'];\r\n                            }\r\n                            return [value, name];\r\n                          }}\r\n                          labelFormatter={(value) => `Time: ${value}s`}\r\n                        />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"wpm\" \r\n                          stroke=\"#FBBF24\" \r\n                          strokeWidth={3}\r\n                          dot={{ fill: '#FBBF24', strokeWidth: 2, r: 4 }}\r\n                          activeDot={{ r: 6, stroke: '#FBBF24', strokeWidth: 2 }}\r\n                        />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"raw\" \r\n                          stroke=\"#6B7280\" \r\n                          strokeWidth={2}\r\n                          strokeDasharray=\"5 5\"\r\n                          dot={false}\r\n                        />\r\n                        <Line \r\n                          type=\"monotone\" \r\n                          dataKey=\"errors\" \r\n                          stroke=\"transparent\" \r\n                          strokeWidth={0}\r\n                          dot={{ fill: '#EF4444', strokeWidth: 0, r: 4 }}\r\n                          activeDot={{ r: 6, stroke: '#EF4444', strokeWidth: 2, fill: '#EF4444' }}\r\n                          connectNulls={false}\r\n                        />\r\n                      </LineChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                  <div className=\"flex justify-center space-x-6 mt-4 text-sm\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <div className=\"w-3 h-3 bg-yellow-400 rounded-full\"></div>\r\n                      <span className=\"text-gray-600 dark:text-gray-300\">Net WPM</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <div className=\"w-3 h-1 bg-gray-500 rounded-full\"></div>\r\n                      <span className=\"text-gray-600 dark:text-gray-300\">Raw WPM</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\r\n                      <span className=\"text-gray-600 dark:text-gray-300\">Errors</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"grid grid-cols-3 gap-8 mb-8\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\">{wpm}</div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">WPM</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-green-600 dark:text-green-400\">{accuracy}%</div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Accuracy</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary-600 dark:text-[#ffca8d]\">{correctChars}/{totalChars}</div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Correct</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Additional Stats Row */}\r\n              <div className=\"grid grid-cols-4 gap-4 mb-8 text-sm\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-lg font-semibold text-blue-600 dark:text-blue-400\">\r\n                    {wpmHistory.length > 0 ? Math.max(...wpmHistory.map(h => h.raw)) : 0}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Raw</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-lg font-semibold text-purple-600 dark:text-purple-400\">\r\n                    {totalChars}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Characters</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-lg font-semibold text-orange-600 dark:text-orange-400\">\r\n                    {wpmHistory.length > 0 ? \r\n                      Math.round((wpmHistory.reduce((sum, h) => sum + h.wpm, 0) / wpmHistory.length) * 100) / 100 \r\n                      : 0}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Consistency</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-lg font-semibold text-gray-600 dark:text-gray-400\">\r\n                    {getTestDuration(selectedMode)}s\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 dark:text-primary-400 uppercase tracking-wide\">Time</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Submission Status */}\r\n              {user && (\r\n                <div className=\"mb-4\">\r\n                  {isSubmittingResult ? (\r\n                    <div className=\"flex items-center justify-center space-x-2 text-yellow-600 dark:text-yellow-400\">\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600\"></div>\r\n                      <span className=\"text-sm\">Saving your result...</span>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-green-600 dark:text-green-400 text-sm\">\r\n                      ✓ Result saved to your history\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n              \r\n              {!user && (\r\n                <div className=\"mb-4 text-gray-600 dark:text-gray-400 text-sm\">\r\n                  <a href=\"/login\" className=\"text-primary-600 dark:text-primary-400 hover:underline\">\r\n                    Sign in\r\n                  </a> to save your results and track your progress\r\n                </div>\r\n              )}\r\n              \r\n              <button \r\n                onClick={resetTest}\r\n                className=\"bg-primary-600 text-white px-8 py-3 rounded font-medium hover:bg-primary-700 transition-colors\"\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {!isTestActive && !isTestComplete && (\r\n            <div className=\"text-center text-gray-500 dark:text-primary-400 mb-4\">\r\n              <p className=\"text-sm\">Focus on the text area above and start typing to begin the test</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Instructions - Clean and minimal */}\r\n        {!isTestActive && !isTestComplete && (\r\n          <div className=\"max-w-4xl mx-auto mt-20 text-center\">\r\n            <div className=\"text-sm text-gray-500 dark:text-primary-400 space-y-2\">\r\n              <p>Click on the text area to start • Type the words exactly as shown • Use backspace to correct mistakes</p>\r\n              <p>Your WPM and accuracy will be calculated in real-time</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}