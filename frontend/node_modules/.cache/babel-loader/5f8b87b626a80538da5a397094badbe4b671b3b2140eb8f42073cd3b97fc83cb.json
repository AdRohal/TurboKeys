{"ast":null,"code":"import React,{createContext,useContext,useReducer,useEffect}from'react';import{Theme}from'../types';import{jsx as _jsx}from\"react/jsx-runtime\";const initialState={theme:localStorage.getItem('theme')||Theme.DARK};const themeReducer=(state,action)=>{switch(action.type){case'SET_THEME':return{...state,theme:action.payload};case'TOGGLE_THEME':return{...state,theme:state.theme===Theme.LIGHT?Theme.DARK:Theme.LIGHT};default:return state;}};const ThemeContext=/*#__PURE__*/createContext(undefined);export const ThemeProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(themeReducer,initialState);useEffect(()=>{const root=window.document.documentElement;root.classList.remove('light','dark');root.classList.add(state.theme);localStorage.setItem('theme',state.theme);// Force scrollbar theme update\nconst style=document.createElement('style');style.textContent=`\n      ::-webkit-scrollbar-track { background: var(--scrollbar-track) !important; }\n      ::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb) !important; }\n      ::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover) !important; }\n    `;document.head.appendChild(style);// Remove the style after a short delay\nsetTimeout(()=>{if(style.parentNode){style.parentNode.removeChild(style);}},100);},[state.theme]);const setTheme=theme=>{dispatch({type:'SET_THEME',payload:theme});};const toggleTheme=()=>{dispatch({type:'TOGGLE_THEME'});};const value={...state,setTheme,toggleTheme};return/*#__PURE__*/_jsx(ThemeContext.Provider,{value:value,children:children});};export const useTheme=()=>{const context=useContext(ThemeContext);if(context===undefined){throw new Error('useTheme must be used within a ThemeProvider');}return context;};","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","Theme","jsx","_jsx","initialState","theme","localStorage","getItem","DARK","themeReducer","state","action","type","payload","LIGHT","ThemeContext","undefined","ThemeProvider","_ref","children","dispatch","root","window","document","documentElement","classList","remove","add","setItem","style","createElement","textContent","head","appendChild","setTimeout","parentNode","removeChild","setTheme","toggleTheme","value","Provider","useTheme","context","Error"],"sources":["C:/GitHub/TurboKeys/frontend/src/contexts/ThemeContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';\r\nimport { Theme } from '../types';\r\n\r\ninterface ThemeState {\r\n  theme: Theme;\r\n}\r\n\r\ntype ThemeAction = \r\n  | { type: 'SET_THEME'; payload: Theme }\r\n  | { type: 'TOGGLE_THEME' };\r\n\r\nconst initialState: ThemeState = {\r\n  theme: (localStorage.getItem('theme') as Theme) || Theme.DARK,\r\n};\r\n\r\nconst themeReducer = (state: ThemeState, action: ThemeAction): ThemeState => {\r\n  switch (action.type) {\r\n    case 'SET_THEME':\r\n      return {\r\n        ...state,\r\n        theme: action.payload,\r\n      };\r\n    case 'TOGGLE_THEME':\r\n      return {\r\n        ...state,\r\n        theme: state.theme === Theme.LIGHT ? Theme.DARK : Theme.LIGHT,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ninterface ThemeContextType extends ThemeState {\r\n  setTheme: (theme: Theme) => void;\r\n  toggleTheme: () => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\ninterface ThemeProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {\r\n  const [state, dispatch] = useReducer(themeReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    const root = window.document.documentElement;\r\n    root.classList.remove('light', 'dark');\r\n    root.classList.add(state.theme);\r\n    localStorage.setItem('theme', state.theme);\r\n    \r\n    // Force scrollbar theme update\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      ::-webkit-scrollbar-track { background: var(--scrollbar-track) !important; }\r\n      ::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb) !important; }\r\n      ::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover) !important; }\r\n    `;\r\n    document.head.appendChild(style);\r\n    \r\n    // Remove the style after a short delay\r\n    setTimeout(() => {\r\n      if (style.parentNode) {\r\n        style.parentNode.removeChild(style);\r\n      }\r\n    }, 100);\r\n  }, [state.theme]);\r\n\r\n  const setTheme = (theme: Theme) => {\r\n    dispatch({ type: 'SET_THEME', payload: theme });\r\n  };\r\n\r\n  const toggleTheme = () => {\r\n    dispatch({ type: 'TOGGLE_THEME' });\r\n  };\r\n\r\n  const value: ThemeContextType = {\r\n    ...state,\r\n    setTheme,\r\n    toggleTheme,\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={value}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}